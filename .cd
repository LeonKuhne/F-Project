TODO:
  - fix function spliting by references (currently disabled)
  - test everything with the js parser
  - finish up and close the refactoring branch
  - parse anonymous functions
  - test parsing regular functions
