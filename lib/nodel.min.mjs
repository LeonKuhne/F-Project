var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function n(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function a(e){const t=document.getElementById("nodel");return[e.x+t.offsetWidth/2,e.y+t.offsetHeight/2]}e.d(t,{Z:()=>r});const i=function(){var e,t,n,a,i,o,s,r,l,u,h,p,d,c,f,y,m,g,S,_,v,b,E,x="leader-line",k=1,w=2,O=3,M=4,C={top:k,right:w,bottom:O,left:M},I=1,L=2,A=3,V=4,P=5,N={straight:I,arc:L,fluid:A,magnet:V,grid:P},T="behind",B=x+"-defs",W='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="leader-line-defs"><style><![CDATA[.leader-line{position:absolute;overflow:visible!important;pointer-events:none!important;font-size:16px}#leader-line-defs{width:0;height:0;position:absolute;left:0;top:0}.leader-line-line-path{fill:none}.leader-line-mask-bg-rect{fill:white}.leader-line-caps-mask-anchor,.leader-line-caps-mask-marker-shape{fill:black}.leader-line-caps-mask-anchor{stroke:black}.leader-line-caps-mask-line,.leader-line-plugs-face{stroke:rgba(0,0,0,0)}.leader-line-line-mask-shape{stroke:white}.leader-line-line-outline-mask-shape{stroke:black}.leader-line-plug-mask-shape{fill:white;stroke:black}.leader-line-plug-outline-mask-shape{fill:black;stroke:white}.leader-line-areaAnchor{position:absolute;overflow:visible!important}]]></style><defs><circle id="leader-line-disc" cx="0" cy="0" r="5"/><rect id="leader-line-square" x="-5" y="-5" width="10" height="10"/><polygon id="leader-line-arrow1" points="-8,-8 8,0 -8,8 -5,0"/><polygon id="leader-line-arrow2" points="-4,-8 4,0 -4,8 -7,5 -2,0 -7,-5"/><polygon id="leader-line-arrow3" points="-4,-5 8,0 -4,5"/><g id="leader-line-hand"><path style="fill: #fcfcfc" d="M9.19 11.14h4.75c1.38 0 2.49-1.11 2.49-2.49 0-.51-.15-.98-.41-1.37h1.3c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.53-2.49-2.53h1.02c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49h14.96c1.37 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49H16.58C16-9.86 14.28-11.14 9.7-11.14c-4.79 0-6.55 3.42-7.87 4.73H-2.14v13.23h3.68C3.29 9.97 5.47 11.14 9.19 11.14L9.19 11.14Z"/><path style="fill: black" d="M13.95 12c1.85 0 3.35-1.5 3.35-3.35 0-.17-.02-.34-.04-.51h.07c1.85 0 3.35-1.5 3.35-3.35 0-.79-.27-1.51-.72-2.08 1.03-.57 1.74-1.67 1.74-2.93 0-.59-.16-1.15-.43-1.63h12.04c1.85 0 3.35-1.5 3.35-3.35 0-1.85-1.5-3.35-3.35-3.35H17.2C16.26-10.93 13.91-12 9.7-12 5.36-12 3.22-9.4 1.94-7.84c0 0-.29.33-.5.57-.63 0-3.58 0-3.58 0C-2.61-7.27-3-6.88-3-6.41v13.23c0 .47.39.86.86.86 0 0 2.48 0 3.2 0C2.9 10.73 5.29 12 9.19 12L13.95 12ZM9.19 10.28c-3.46 0-5.33-1.05-6.9-3.87-.15-.27-.44-.44-.75-.44 0 0-1.81 0-2.82 0V-5.55c1.06 0 3.11 0 3.11 0 .25 0 .44-.06.61-.25l.83-.95c1.23-1.49 2.91-3.53 6.43-3.53 3.45 0 4.9.74 5.57 1.72h-4.3c-.48 0-.86.38-.86.86s.39.86.86.86h22.34c.9 0 1.63.73 1.63 1.63 0 .9-.73 1.63-1.63 1.63H15.83c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.52c.9 0 1.63.73 1.63 1.63s-.73 1.63-1.63 1.63h-3.12c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.11c.88 0 1.63.76 1.63 1.67 0 .9-.73 1.63-1.63 1.63h-3.2c-.48 0-.86.39-.86.86 0 .47.39.86.86.86h1.36c.05.16.09.34.09.51 0 .9-.73 1.63-1.63 1.63C13.95 10.28 9.19 10.28 9.19 10.28Z"/></g><g id="leader-line-crosshair"><path d="M0-78.97c-43.54 0-78.97 35.43-78.97 78.97 0 43.54 35.43 78.97 78.97 78.97s78.97-35.43 78.97-78.97C78.97-43.54 43.55-78.97 0-78.97ZM76.51-1.21h-9.91v-9.11h-2.43v9.11h-11.45c-.64-28.12-23.38-50.86-51.5-51.5V-64.17h9.11V-66.6h-9.11v-9.91C42.46-75.86 75.86-42.45 76.51-1.21ZM-1.21-30.76h-9.11v2.43h9.11V-4.2c-1.44.42-2.57 1.54-2.98 2.98H-28.33v-9.11h-2.43v9.11H-50.29C-49.65-28-27.99-49.65-1.21-50.29V-30.76ZM-30.76 1.21v9.11h2.43v-9.11H-4.2c.42 1.44 1.54 2.57 2.98 2.98v24.13h-9.11v2.43h9.11v19.53C-27.99 49.65-49.65 28-50.29 1.21H-30.76ZM1.22 30.75h9.11v-2.43h-9.11V4.2c1.44-.42 2.56-1.54 2.98-2.98h24.13v9.11h2.43v-9.11h19.53C49.65 28 28 49.65 1.22 50.29V30.75ZM30.76-1.21v-9.11h-2.43v9.11H4.2c-.42-1.44-1.54-2.56-2.98-2.98V-28.33h9.11v-2.43h-9.11V-50.29C28-49.65 49.65-28 50.29-1.21H30.76ZM-1.21-76.51v9.91h-9.11v2.43h9.11v11.45c-28.12.64-50.86 23.38-51.5 51.5H-64.17v-9.11H-66.6v9.11h-9.91C-75.86-42.45-42.45-75.86-1.21-76.51ZM-76.51 1.21h9.91v9.11h2.43v-9.11h11.45c.64 28.12 23.38 50.86 51.5 51.5v11.45h-9.11v2.43h9.11v9.91C-42.45 75.86-75.86 42.45-76.51 1.21ZM1.22 76.51v-9.91h9.11v-2.43h-9.11v-11.45c28.12-.64 50.86-23.38 51.5-51.5h11.45v9.11h2.43v-9.11h9.91C75.86 42.45 42.45 75.86 1.22 76.51Z"/><path d="M0 83.58-7.1 96 7.1 96Z"/><path d="M0-83.58 7.1-96-7.1-96"/><path d="M83.58 0 96 7.1 96-7.1Z"/><path d="M-83.58 0-96-7.1-96 7.1Z"/></g></defs></svg>',G={disc:{elmId:"leader-line-disc",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},square:{elmId:"leader-line-square",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},arrow1:{elmId:"leader-line-arrow1",bBox:{left:-8,top:-8,width:16,height:16,right:8,bottom:8},widthR:4,heightR:4,bCircle:8,sideLen:8,backLen:8,overhead:8,outlineBase:2,outlineMax:1.5},arrow2:{elmId:"leader-line-arrow2",bBox:{left:-7,top:-8,width:11,height:16,right:4,bottom:8},widthR:2.75,heightR:4,bCircle:8,sideLen:8,backLen:7,overhead:4,outlineBase:1,outlineMax:1.75},arrow3:{elmId:"leader-line-arrow3",bBox:{left:-4,top:-5,width:12,height:10,right:8,bottom:5},widthR:3,heightR:2.5,bCircle:8,sideLen:5,backLen:4,overhead:8,outlineBase:1,outlineMax:2.5},hand:{elmId:"leader-line-hand",bBox:{left:-3,top:-12,width:40,height:24,right:37,bottom:12},widthR:10,heightR:6,bCircle:37,sideLen:12,backLen:3,overhead:37},crosshair:{elmId:"leader-line-crosshair",noRotate:!0,bBox:{left:-96,top:-96,width:192,height:192,right:96,bottom:96},widthR:48,heightR:48,bCircle:96,sideLen:96,backLen:96,overhead:0}},D={behind:T,disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},R={disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},F=[k,w,O,M],j="auto",z={x:"left",y:"top",width:"width",height:"height"},H=80,Y=4,U=5,Z=120,q=8,X=3.75,$=10,Q=30,K=.5522847,J=.25*Math.PI,ee=/^\s*(\-?[\d\.]+)\s*(\%)?\s*$/,te="http://www.w3.org/2000/svg",ne=!(de="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled)&&!!document.uniqueID,ae="MozAppearance"in document.documentElement.style,ie=!(de||ae||!window.chrome||!window.CSS),oe=!(de||ne||ae||ie||window.chrome||!("WebkitAppearance"in document.documentElement.style)),se=ne||de?.2:.1,re={path:A,lineColor:"coral",lineSize:4,plugSE:[T,"arrow1"],plugSizeSE:[1,1],lineOutlineEnabled:!1,lineOutlineColor:"indianred",lineOutlineSize:.25,plugOutlineEnabledSE:[!1,!1],plugOutlineSizeSE:[1,1]},le=(v={}.toString,b={}.hasOwnProperty.toString,E=b.call(Object),function(e){return e&&"[object Object]"===v.call(e)&&(!(e=Object.getPrototypeOf(e))||(e=e.hasOwnProperty("constructor")&&e.constructor)&&"function"==typeof e&&b.call(e)===E)}),ue=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},he=(c={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},f=1e3/60/2,y=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,f)},m=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)},g=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},S=[],_=0,{add:function(e,t,n,a,i,o,s){var r,l,u,h,p,d,y,m,g,v,b=++_;function E(t,n){return{value:e(n),timeRatio:t,outputRatio:n}}if("string"==typeof i&&(i=c[i]),e=e||function(){},n<f)r=[E(0,0),E(1,1)];else{if(l=f/n,r=[E(0,0)],0===i[0]&&0===i[1]&&1===i[2]&&1===i[3])for(h=l;h<=1;h+=l)r.push(E(h,h));else for(p=u=(h=l)/10;p<=1;p+=u)v=void 0,m=(v=p*p)*p,v*=3*(g=1-p),h<=(d={x:(y=g*g*3*p)*i[0]+v*i[2]+m,y:y*i[1]+v*i[3]+m}).x&&(r.push(E(d.x,d.y)),h+=l);r.push(E(1,1))}return S.push(o={animId:b,frameCallback:t,duration:n,count:a,frames:r,reverse:!!o}),!1!==s&&xe(o,s),b},remove:function(e){var t;S.some((function(n,a){return n.animId===e&&(t=a,!(n.framesStart=null))}))&&S.splice(t,1)},start:function(e,t,n){S.some((function(a){return a.animId===e&&(a.reverse=!!t,xe(a,n),!0)}))},stop:function(e,t){var n;return S.some((function(a){return a.animId===e&&(t?null!=a.lastFrame&&(n=a.frames[a.lastFrame].timeRatio):(n=(Date.now()-a.framesStart)/a.duration,(n=a.reverse?1-n:n)<0?n=0:1<n&&(n=1)),!(a.framesStart=null))})),n},validTiming:function(e){return"string"==typeof e?c[e]:Array.isArray(e)&&[0,1,2,3].every((function(t){return g(e[t])&&0<=e[t]&&e[t]<=1}))?[e[0],e[1],e[2],e[3]]:null}}),pe=function(e){e.SVGPathElement.prototype.getPathData&&e.SVGPathElement.prototype.setPathData||function(){function t(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()}var n={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},a=-1!==e.navigator.userAgent.indexOf("MSIE ");function i(e){if(!e||0===e.length)return[];var n=new t(e),a=[];if(n.initialCommandIsMoveTo())for(;n.hasMoreData();){var i=n.parseSegment();if(null===i)break;a.push(i)}return a}function o(e){return e.map((function(e){return{type:e.type,values:Array.prototype.slice.call(e.values)}}))}function s(e){var t=[],n=null,a=null,i=null,o=null,s=null,r=null,l=null;return e.forEach((function(e){var u,h,d,c,f,y,m,g;"M"===e.type?(m=e.values[0],g=e.values[1],t.push({type:"M",values:[m,g]}),o=r=m,s=l=g):"C"===e.type?(f=e.values[0],y=e.values[1],u=e.values[2],h=e.values[3],m=e.values[4],g=e.values[5],t.push({type:"C",values:[f,y,u,h,m,g]}),a=u,i=h,o=m,s=g):"L"===e.type?(m=e.values[0],g=e.values[1],t.push({type:"L",values:[m,g]}),o=m,s=g):"H"===e.type?(m=e.values[0],t.push({type:"L",values:[m,s]}),o=m):"V"===e.type?(g=e.values[0],t.push({type:"L",values:[o,g]}),s=g):"S"===e.type?(u=e.values[0],h=e.values[1],m=e.values[2],g=e.values[3],c="C"===n||"S"===n?(d=o+(o-a),s+(s-i)):(d=o,s),t.push({type:"C",values:[d,c,u,h,m,g]}),a=u,i=h,o=m,s=g):"T"===e.type?(m=e.values[0],g=e.values[1],y="Q"===n||"T"===n?(f=o+(o-a),s+(s-i)):(f=o,s),t.push({type:"C",values:[d=o+2*(f-o)/3,c=s+2*(y-s)/3,m+2*(f-m)/3,g+2*(y-g)/3,m,g]}),a=f,i=y,o=m,s=g):"Q"===e.type?(f=e.values[0],y=e.values[1],m=e.values[2],g=e.values[3],t.push({type:"C",values:[d=o+2*(f-o)/3,c=s+2*(y-s)/3,m+2*(f-m)/3,g+2*(y-g)/3,m,g]}),a=f,i=y,o=m,s=g):"A"===e.type?(h=e.values[0],d=e.values[1],c=e.values[2],f=e.values[3],y=e.values[4],m=e.values[5],g=e.values[6],0===h||0===d?(t.push({type:"C",values:[o,s,m,g,m,g]}),o=m,s=g):o===m&&s===g||p(o,s,m,g,h,d,c,f,y).forEach((function(e){t.push({type:"C",values:e}),o=m,s=g}))):"Z"===e.type&&(t.push(e),o=r,s=l),n=e.type})),t}t.prototype={parseSegment:function(){var e=this._string[this._currentIndex],t=n[e]||null;if(null===t){if(null===this._prevCommand)return null;if(null===(t=("+"===e||"-"===e||"."===e||"0"<=e&&e<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;var a=null;return"H"===(e=(this._prevCommand=t).toUpperCase())||"V"===e?a=[this._parseNumber()]:"M"===e||"L"===e||"T"===e?a=[this._parseNumber(),this._parseNumber()]:"S"===e||"Q"===e?a=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===e?a=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===e?a=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===e&&(this._skipOptionalSpaces(),a=[]),null===a||0<=a.indexOf(null)?null:{type:t,values:a}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var e=this._string[this._currentIndex];return n[e]||null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return"M"===e||"m"===e},_isCurrentSpace:function(){var e=this._string[this._currentIndex];return e<=" "&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var e=0,t=0,n=1,a=0,i=1,o=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,i=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])&&"."!==this._string[this._currentIndex])return null;for(var r=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==r)for(var l=this._currentIndex-1,u=1;r<=l;)t+=u*(this._string[l]-"0"),--l,u*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)n*=10,a+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!==s&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var h=t+a;return h*=i,e&&(h*=Math.pow(10,o*e)),s===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),h)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===t)e=0;else{if("1"!==t)return null;e=1}return this._skipOptionalSpacesOrDelimiter(),e}};var r=e.SVGPathElement.prototype.setAttribute,l=e.SVGPathElement.prototype.removeAttribute,u=e.Symbol?e.Symbol():"__cachedPathData",h=e.Symbol?e.Symbol():"__cachedNormalizedPathData",p=function(e,t,n,a,i,o,s,r,l,u){function h(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}var d=Math.PI*s/180,c=[];u?(v=u[0],b=u[1],S=u[2],_=u[3]):(e=(g=h(e,t,-d)).x,t=g.y,1<(g=(m=(e-(n=(y=h(n,a,-d)).x))/2)*m/(i*i)+(f=(t-(a=y.y))/2)*f/(o*o))&&(i*=g=Math.sqrt(g),o*=g),y=i*i,g=o*o,S=(y=(r===l?-1:1)*Math.sqrt(Math.abs((y*g-y*f*f-g*m*m)/(y*f*f+g*m*m))))*i*f/o+(e+n)/2,_=y*-o*m/i+(t+a)/2,v=Math.asin(parseFloat(((t-_)/o).toFixed(9))),b=Math.asin(parseFloat(((a-_)/o).toFixed(9))),e<S&&(v=Math.PI-v),n<S&&(b=Math.PI-b),v<0&&(v=2*Math.PI+v),b<0&&(b=2*Math.PI+b),l&&b<v&&(v-=2*Math.PI),!l&&v<b&&(b-=2*Math.PI));var f,y,m,g=b-v;Math.abs(g)>120*Math.PI/180&&(f=b,y=n,m=a,b=l&&v<b?v+120*Math.PI/180*1:v+120*Math.PI/180*-1,n=S+i*Math.cos(b),a=_+o*Math.sin(b),c=p(n,a,y,m,i,o,s,0,l,[b,f,S,_])),g=b-v;var S=Math.cos(v),_=Math.sin(v),v=Math.cos(b),b=Math.sin(b);if(v=[n+(i=4/3*i*(g=Math.tan(g/4)))*b,a-(o=4/3*o*g)*v],a=[n,a],(S=[e+i*_,t-o*S])[0]=2*(g=[e,t])[0]-S[0],S[1]=2*g[1]-S[1],u)return[S,v,a].concat(c);c=[S,v,a].concat(c).join().split(",");var E=[],x=[];return c.forEach((function(e,t){t%2?x.push(h(c[t-1],c[t],d).y):x.push(h(c[t],c[t+1],d).x),6===x.length&&(E.push(x),x=[])})),E};e.SVGPathElement.prototype.setAttribute=function(e,t){"d"===e&&(this[u]=null,this[h]=null),r.call(this,e,t)},e.SVGPathElement.prototype.removeAttribute=function(e,t){"d"===e&&(this[u]=null,this[h]=null),l.call(this,e)},e.SVGPathElement.prototype.getPathData=function(e){if(e&&e.normalize)return this[h]?o(this[h]):(this[u]?p=o(this[u]):(p=i(this.getAttribute("d")||""),this[u]=o(p)),e=s((t=[],l=r=a=n=null,p.forEach((function(e){var i,o,s,u,h,p,d=e.type;"M"===d?(h=e.values[0],p=e.values[1],t.push({type:"M",values:[h,p]}),n=r=h,a=l=p):"m"===d?(h=n+e.values[0],p=a+e.values[1],t.push({type:"M",values:[h,p]}),n=r=h,a=l=p):"L"===d?(h=e.values[0],p=e.values[1],t.push({type:"L",values:[h,p]}),n=h,a=p):"l"===d?(h=n+e.values[0],p=a+e.values[1],t.push({type:"L",values:[h,p]}),n=h,a=p):"C"===d?(i=e.values[0],o=e.values[1],s=e.values[2],u=e.values[3],h=e.values[4],p=e.values[5],t.push({type:"C",values:[i,o,s,u,h,p]}),n=h,a=p):"c"===d?(i=n+e.values[0],o=a+e.values[1],s=n+e.values[2],u=a+e.values[3],h=n+e.values[4],p=a+e.values[5],t.push({type:"C",values:[i,o,s,u,h,p]}),n=h,a=p):"Q"===d?(i=e.values[0],o=e.values[1],h=e.values[2],p=e.values[3],t.push({type:"Q",values:[i,o,h,p]}),n=h,a=p):"q"===d?(i=n+e.values[0],o=a+e.values[1],h=n+e.values[2],p=a+e.values[3],t.push({type:"Q",values:[i,o,h,p]}),n=h,a=p):"A"===d?(h=e.values[5],p=e.values[6],t.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],h,p]}),n=h,a=p):"a"===d?(h=n+e.values[5],p=a+e.values[6],t.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],h,p]}),n=h,a=p):"H"===d?(h=e.values[0],t.push({type:"H",values:[h]}),n=h):"h"===d?(h=n+e.values[0],t.push({type:"H",values:[h]}),n=h):"V"===d?(p=e.values[0],t.push({type:"V",values:[p]}),a=p):"v"===d?(p=a+e.values[0],t.push({type:"V",values:[p]}),a=p):"S"===d?(s=e.values[0],u=e.values[1],h=e.values[2],p=e.values[3],t.push({type:"S",values:[s,u,h,p]}),n=h,a=p):"s"===d?(s=n+e.values[0],u=a+e.values[1],h=n+e.values[2],p=a+e.values[3],t.push({type:"S",values:[s,u,h,p]}),n=h,a=p):"T"===d?(h=e.values[0],p=e.values[1],t.push({type:"T",values:[h,p]}),n=h,a=p):"t"===d?(h=n+e.values[0],p=a+e.values[1],t.push({type:"T",values:[h,p]}),n=h,a=p):"Z"!==d&&"z"!==d||(t.push({type:"Z",values:[]}),n=r,a=l)})),t)),this[h]=o(e),e);if(this[u])return o(this[u]);var t,n,a,r,l,p=i(this.getAttribute("d")||"");return this[u]=o(p),p},e.SVGPathElement.prototype.setPathData=function(e){if(0===e.length)a?this.setAttribute("d",""):this.removeAttribute("d");else{for(var t="",n=0,i=e.length;n<i;n+=1){var o=e[n];0<n&&(t+=" "),t+=o.type,o.values&&0<o.values.length&&(t+=" "+o.values.join(" "))}this.setAttribute("d",t)}},e.SVGRectElement.prototype.getPathData=function(e){var t=this.x.baseVal.value,n=this.y.baseVal.value,a=this.width.baseVal.value,i=this.height.baseVal.value,o=(this.hasAttribute("rx")?this.rx:this.ry).baseVal.value,r=(this.hasAttribute("ry")?this.ry:this.rx).baseVal.value;return n=(n=[{type:"M",values:[t+(o=a/2<o?a/2:o),n]},{type:"H",values:[t+a-o]},{type:"A",values:[o,r=i/2<r?i/2:r,0,0,1,t+a,n+r]},{type:"V",values:[n+i-r]},{type:"A",values:[o,r,0,0,1,t+a-o,n+i]},{type:"H",values:[t+o]},{type:"A",values:[o,r,0,0,1,t,n+i-r]},{type:"V",values:[n+r]},{type:"A",values:[o,r,0,0,1,t+o,n]},{type:"Z",values:[]}]).filter((function(e){return"A"!==e.type||0!==e.values[0]&&0!==e.values[1]})),e&&!0===e.normalize?s(n):n},e.SVGCircleElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,a=this.r.baseVal.value;return n=[{type:"M",values:[t+a,n]},{type:"A",values:[a,a,0,0,1,t,n+a]},{type:"A",values:[a,a,0,0,1,t-a,n]},{type:"A",values:[a,a,0,0,1,t,n-a]},{type:"A",values:[a,a,0,0,1,t+a,n]},{type:"Z",values:[]}],e&&!0===e.normalize?s(n):n},e.SVGEllipseElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,a=this.rx.baseVal.value,i=this.ry.baseVal.value;return n=[{type:"M",values:[t+a,n]},{type:"A",values:[a,i,0,0,1,t,n+i]},{type:"A",values:[a,i,0,0,1,t-a,n]},{type:"A",values:[a,i,0,0,1,t,n-i]},{type:"A",values:[a,i,0,0,1,t+a,n]},{type:"Z",values:[]}],e&&!0===e.normalize?s(n):n},e.SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},e.SVGPolylineElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e},e.SVGPolygonElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e.push({type:"Z",values:[]}),e}}()},de=(p={},be.m=h=[function(e,t,n){n.r(t);var a=[],i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},s=Date.now(),r=void 0;function l(){var e=void 0,t=void 0;r&&(o.call(window,r),r=null),a.forEach((function(t){var n;(n=t.event)&&(t.event=null,t.listener(n),e=!0)})),e?(s=Date.now(),t=!0):Date.now()-s<500&&(t=!0),t&&(r=i.call(window,l))}function u(e){var t=-1;return a.some((function(n,a){return n.listener===e&&(t=a,!0)})),t}t.default={add:function(e){var t=void 0;return-1===u(e)?(a.push(t={listener:e}),function(e){t.event=e,r||l()}):null},remove:function(e){-1<(e=u(e))&&(a.splice(e,1),!a.length&&r&&(o.call(window,r),r=null))}}}],be.c=p,be.d=function(e,t,n){be.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},be.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},be.t=function(e,t){if(1&t&&(e=be(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(be.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)be.d(n,a,function(t){return e[t]}.bind(null,a));return n},be.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return be.d(t,"a",t),t},be.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},be.p="",be(be.s=0).default),ce={line_altColor:{iniValue:!1},line_color:{},line_colorTra:{iniValue:!1},line_strokeWidth:{},plug_enabled:{iniValue:!1},plug_enabledSE:{hasSE:!0,iniValue:!1},plug_plugSE:{hasSE:!0,iniValue:T},plug_colorSE:{hasSE:!0},plug_colorTraSE:{hasSE:!0,iniValue:!1},plug_markerWidthSE:{hasSE:!0},plug_markerHeightSE:{hasSE:!0},lineOutline_enabled:{iniValue:!1},lineOutline_color:{},lineOutline_colorTra:{iniValue:!1},lineOutline_strokeWidth:{},lineOutline_inStrokeWidth:{},plugOutline_enabledSE:{hasSE:!0,iniValue:!1},plugOutline_plugSE:{hasSE:!0,iniValue:T},plugOutline_colorSE:{hasSE:!0},plugOutline_colorTraSE:{hasSE:!0,iniValue:!1},plugOutline_strokeWidthSE:{hasSE:!0},plugOutline_inStrokeWidthSE:{hasSE:!0},position_socketXYSE:{hasSE:!0,hasProps:!0},position_plugOverheadSE:{hasSE:!0},position_path:{},position_lineStrokeWidth:{},position_socketGravitySE:{hasSE:!0},path_pathData:{},path_edge:{hasProps:!0},viewBox_bBox:{hasProps:!0},viewBox_plugBCircleSE:{hasSE:!0},lineMask_enabled:{iniValue:!1},lineMask_outlineMode:{iniValue:!1},lineMask_x:{},lineMask_y:{},lineOutlineMask_x:{},lineOutlineMask_y:{},maskBGRect_x:{},maskBGRect_y:{},capsMaskAnchor_enabledSE:{hasSE:!0,iniValue:!1},capsMaskAnchor_pathDataSE:{hasSE:!0},capsMaskAnchor_strokeWidthSE:{hasSE:!0},capsMaskMarker_enabled:{iniValue:!1},capsMaskMarker_enabledSE:{hasSE:!0,iniValue:!1},capsMaskMarker_plugSE:{hasSE:!0,iniValue:T},capsMaskMarker_markerWidthSE:{hasSE:!0},capsMaskMarker_markerHeightSE:{hasSE:!0},caps_enabled:{iniValue:!1},attach_plugSideLenSE:{hasSE:!0},attach_plugBackLenSE:{hasSE:!0}},fe={show_on:{},show_effect:{},show_animOptions:{},show_animId:{},show_inAnim:{}},ye="fade",me=[],ge={},Se=0,_e={},ve=0;function be(e){if(p[e])return p[e].exports;var t=p[e]={i:e,l:!1,exports:{}};return h[e].call(t.exports,t,t.exports,be),t.l=!0,t.exports}function Ee(){var e=Date.now(),t=!1;d&&(m.call(window,d),d=null),S.forEach((function(n){var a,i,o;if(n.framesStart){if((a=e-n.framesStart)>=n.duration&&n.count&&n.loopsLeft<=1)return o=n.frames[n.lastFrame=n.reverse?0:n.frames.length-1],n.frameCallback(o.value,!0,o.timeRatio,o.outputRatio),void(n.framesStart=null);if(a>n.duration){if(i=Math.floor(a/n.duration),n.count){if(i>=n.loopsLeft)return o=n.frames[n.lastFrame=n.reverse?0:n.frames.length-1],n.frameCallback(o.value,!0,o.timeRatio,o.outputRatio),void(n.framesStart=null);n.loopsLeft-=i}n.framesStart+=n.duration*i,a=e-n.framesStart}n.reverse&&(a=n.duration-a),o=n.frames[n.lastFrame=Math.round(a/f)],!1!==n.frameCallback(o.value,!1,o.timeRatio,o.outputRatio)?t=!0:n.framesStart=null}})),t&&(d=y.call(window,Ee))}function xe(e,t){e.framesStart=Date.now(),null!=t&&(e.framesStart-=e.duration*(e.reverse?1-t:t)),e.loopsLeft=e.count,e.lastFrame=null,Ee()}function ke(e,t){var n,a;return typeof e!=typeof t||(n=le(e)?"obj":Array.isArray(e)?"array":"")!=(le(t)?"obj":Array.isArray(t)?"array":"")||("obj"===n?ke(a=Object.keys(e).sort(),Object.keys(t).sort())||a.some((function(n){return ke(e[n],t[n])})):"array"===n?e.length!==t.length||e.some((function(e,n){return ke(e,t[n])})):e!==t)}function we(e){return e&&(le(e)?Object.keys(e).reduce((function(t,n){return t[n]=we(e[n]),t}),{}):Array.isArray(e)?e.map(we):e)}function Oe(e){var t,n,a,i=1,o=e=(e+"").trim();function s(e){var t=1;return(e=ee.exec(e))&&(t=parseFloat(e[1]),e[2]?t=0<=t&&t<=100?t/100:1:(t<0||1<t)&&(t=1)),t}return(t=/^(rgba|hsla|hwb|gray|device\-cmyk)\s*\(([\s\S]+)\)$/i.exec(e))?(n=t[1].toLowerCase(),a=t[2].trim().split(/\s*,\s*/),"rgba"===n&&4===a.length?(i=s(a[3]),o="rgb("+a.slice(0,3).join(", ")+")"):"hsla"===n&&4===a.length?(i=s(a[3]),o="hsl("+a.slice(0,3).join(", ")+")"):"hwb"===n&&4===a.length?(i=s(a[3]),o="hwb("+a.slice(0,3).join(", ")+")"):"gray"===n&&2===a.length?(i=s(a[1]),o="gray("+a[0]+")"):"device-cmyk"===n&&5<=a.length&&(i=s(a[4]),o="device-cmyk("+a.slice(0,4).join(", ")+")")):(t=/^\#(?:([\da-f]{6})([\da-f]{2})|([\da-f]{3})([\da-f]))$/i.exec(e))?o=t[1]?(i=parseInt(t[2],16)/255,"#"+t[1]):(i=parseInt(t[4]+t[4],16)/255,"#"+t[3]):"transparent"===e.toLocaleLowerCase()&&(i=0),[i,o]}function Me(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE||"function"!=typeof e.getBoundingClientRect)}function Ce(e,t){var n,a,i,o={};if(!(i=e.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(e.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_DISCONNECTED)return console.error("A disconnected element was passed."),null;for(a in n=e.getBoundingClientRect())o[a]=n[a];if(!t){if(!(i=i.defaultView))return console.error("Cannot get window that contains the element."),null;o.left+=i.pageXOffset,o.right+=i.pageXOffset,o.top+=i.pageYOffset,o.bottom+=i.pageYOffset}return o}function Ie(e,t){var n,a=[],i=e;for(t=t||window;;){if(!(n=i.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(!(n=n.defaultView))return console.error("Cannot get window that contains the element."),null;if(n===t)break;if(!(i=n.frameElement))return console.error("`baseWindow` was not found."),null;a.unshift(i)}return a}function Le(e,t){var n=0,a=0;return(t=Ie(e,t=t||window))?t.length?(t.forEach((function(e,t){var i=Ce(e,0<t);n+=i.left,a+=i.top,e=(t=e).ownerDocument.defaultView.getComputedStyle(t,""),i={left:t.clientLeft+parseFloat(e.paddingLeft),top:t.clientTop+parseFloat(e.paddingTop)},n+=i.left,a+=i.top})),(t=Ce(e,!0)).left+=n,t.right+=n,t.top+=a,t.bottom+=a,t):Ce(e):null}function Ae(e,t){var n=e.x-t.x;return t=e.y-t.y,Math.sqrt(n*n+t*t)}function Ve(e,t,n){var a=t.x-e.x;return t=t.y-e.y,{x:e.x+a*n,y:e.y+t*n,angle:Math.atan2(t,a)/(Math.PI/180)}}function Pe(e,t,n){return e=Math.atan2(e.y-t.y,t.x-e.x),{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n*-1}}function Ne(e,t,n,a,i){var o=(d=i*i)*i,s=1-i,r=(h=(p=s*s)*s)*e.x+3*p*i*t.x+3*s*d*n.x+o*a.x,l=h*e.y+3*p*i*t.y+3*s*d*n.y+o*a.y,u=e.x+2*i*(t.x-e.x)+d*(n.x-2*t.x+e.x),h=e.y+2*i*(t.y-e.y)+d*(n.y-2*t.y+e.y),p=t.x+2*i*(n.x-t.x)+d*(a.x-2*n.x+t.x),d=(o=t.y+2*i*(n.y-t.y)+d*(a.y-2*n.y+t.y),s*e.x+i*t.x);return e=s*e.y+i*t.y,t=s*n.x+i*a.x,i=s*n.y+i*a.y,a=90-180*Math.atan2(u-p,h-o)/Math.PI,{x:r,y:l,fromP2:{x:u,y:h},toP1:{x:p,y:o},fromP1:{x:d,y:e},toP2:{x:t,y:i},angle:a+=180<a?-180:180}}function Te(e,t,n,a,i){function o(e,t,n,a,i){return e*(e*(-3*t+9*n-9*a+3*i)+6*t-12*n+6*a)-3*t+3*n}var s,r,l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],u=0,h=(i=null==i||1<i?1:i<0?0:i)/2;return[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach((function(i,p){s=o(r=h*i+h,e.x,t.x,n.x,a.x),r=o(r,e.y,t.y,n.y,a.y),r=s*s+r*r,u+=l[p]*Math.sqrt(r)})),h*u}function Be(e,t,n,a,i){for(var o,s=.5,r=1-s;o=Te(e,t,n,a,r),!(Math.abs(o-i)<=.01);)r+=(o<i?1:-1)*(s/=2);return r}function We(e,t){var n;return e.forEach((function(e){e=t?e.map((function(e){return e={x:e.x,y:e.y},t(e),e})):e,(n=n||[{type:"M",values:[e[0].x,e[0].y]}]).push(e.length?2===e.length?{type:"L",values:[e[1].x,e[1].y]}:{type:"C",values:[e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]}:{type:"Z",values:[]})})),n}function Ge(e){var t=[],n=0;return e.forEach((function(e){e=(2===e.length?Ae:Te).apply(null,e),t.push(e),n+=e})),{segsLen:t,lenAll:n}}function De(e,t){return null==e||null==t||e.length!==t.length||e.some((function(e,n){var a=t[n];return e.type!==a.type||e.values.some((function(e,t){return e!==a.values[t]}))}))}function Re(e,t,n){e.events[t]?e.events[t].indexOf(n)<0&&e.events[t].push(n):e.events[t]=[n]}function Fe(e,t,n){var a;e.events[t]&&-1<(a=e.events[t].indexOf(n))&&e.events[t].splice(a,1)}function je(e){s&&clearTimeout(s),me.push(e),s=setTimeout((function(){me.forEach((function(e){e()})),me=[]}),0)}function ze(e,t){e.reflowTargets.indexOf(t)<0&&e.reflowTargets.push(t)}function He(e){e.reflowTargets.forEach((function(e){var t;t=e,setTimeout((function(){var e=t.parentNode,n=t.nextSibling;e.insertBefore(e.removeChild(t),n)}),0)})),e.reflowTargets=[]}function Ye(e,t,n,a,i,o,s){var l;"auto-start-reverse"===n?("boolean"!=typeof r&&(t.setAttribute("orient","auto-start-reverse"),r=t.orientType.baseVal===SVGMarkerElement.SVG_MARKER_ORIENT_UNKNOWN),r?t.setAttribute("orient",n):((l=i.createSVGTransform()).setRotate(180,0,0),o.transform.baseVal.appendItem(l),t.setAttribute("orient","auto"),l=!0)):(t.setAttribute("orient",n),!1===r&&o.transform.baseVal.clear()),t=t.viewBox.baseVal,l?(t.x=-a.right,t.y=-a.bottom):(t.x=a.left,t.y=a.top),t.width=a.width,t.height=a.height,ne&&ze(e,s)}function Ue(e,t){return{prop:e?"markerEnd":"markerStart",orient:t?t.noRotate?"0":e?"auto":"auto-start-reverse":null}}function Ze(e,t){Object.keys(t).forEach((function(n){var a=t[n];e[n]=null!=a.iniValue?a.hasSE?[a.iniValue,a.iniValue]:a.iniValue:a.hasSE?a.hasProps?[{},{}]:[]:a.hasProps?{}:null}))}function qe(e,t,n,a,i){return a!==t[n]&&(t[n]=a,i&&i.forEach((function(t){t(e,a,n)})),!0)}function Xe(e){function t(e,t){return e+parseFloat(t)}var n=e.document,a=e.getComputedStyle(n.documentElement,"");return e=e.getComputedStyle(n.body,""),n={x:0,y:0},"static"!==e.position?(n.x-=[a.marginLeft,a.borderLeftWidth,a.paddingLeft,e.marginLeft,e.borderLeftWidth].reduce(t,0),n.y-=[a.marginTop,a.borderTopWidth,a.paddingTop,e.marginTop,e.borderTopWidth].reduce(t,0)):"static"!==a.position&&(n.x-=[a.marginLeft,a.borderLeftWidth].reduce(t,0),n.y-=[a.marginTop,a.borderTopWidth].reduce(t,0)),n}function $e(e){var t,n=e.document;n.getElementById(B)||(t=(new e.DOMParser).parseFromString(W,"image/svg+xml"),n.body.appendChild(t.documentElement),pe(e))}function Qe(e){var t,n,a,i,o,s,r,l,u,h,p,d,c,f,y=e.options,m=e.curStats,g=e.aplStats,S=m.position_socketXYSE,_=!1;function v(e,t){return(e=t===k?{x:e.left+e.width/2,y:e.top}:t===w?{x:e.right,y:e.top+e.height/2}:t===O?{x:e.left+e.width/2,y:e.bottom}:{x:e.left,y:e.top+e.height/2}).socketId=t,e}function b(e){return{x:e.x,y:e.y}}if(m.position_path=y.path,m.position_lineStrokeWidth=m.line_strokeWidth,m.position_socketGravitySE=t=we(y.socketGravitySE),n=[0,1].map((function(t){var n=y.anchorSE[t],a=e.optionIsAttach.anchorSE[t],i=!1!==a?_e[n._id]:null,o=!1!==a&&i.conf.getStrokeWidth?i.conf.getStrokeWidth(i,e):0,s=!1!==a&&i.conf.getBBoxNest?i.conf.getBBoxNest(i,e,o):Le(n,e.baseWindow);return m.capsMaskAnchor_pathDataSE[t]=!1!==a&&i.conf.getPathData?i.conf.getPathData(i,e,o):(a=null!=(n=s).right?n.right:n.left+n.width,i=null!=n.bottom?n.bottom:n.top+n.height,[{type:"M",values:[n.left,n.top]},{type:"L",values:[a,n.top]},{type:"L",values:[a,i]},{type:"L",values:[n.left,i]},{type:"Z",values:[]}]),m.capsMaskAnchor_strokeWidthSE[t]=o,s})),r=-1,y.socketSE[0]&&y.socketSE[1]?(S[0]=v(n[0],y.socketSE[0]),S[1]=v(n[1],y.socketSE[1])):(y.socketSE[0]||y.socketSE[1]?(s=y.socketSE[0]?(o=0,1):(o=1,0),S[o]=v(n[o],y.socketSE[o]),(i=F.map((function(e){return v(n[s],e)}))).forEach((function(e){var t=Ae(e,S[o]);(t<r||-1===r)&&(S[s]=e,r=t)}))):(i=F.map((function(e){return v(n[1],e)})),F.map((function(e){return v(n[0],e)})).forEach((function(e){i.forEach((function(t){var n=Ae(e,t);(n<r||-1===r)&&(S[0]=e,S[1]=t,r=n)}))}))),[0,1].forEach((function(e){var t,a;y.socketSE[e]||(n[e].width||n[e].height?n[e].width||S[e].socketId!==M&&S[e].socketId!==w?n[e].height||S[e].socketId!==k&&S[e].socketId!==O||(S[e].socketId=0<=S[e?0:1].y-n[e].top?O:k):S[e].socketId=0<=S[e?0:1].x-n[e].left?w:M:(t=S[e?0:1].x-n[e].left,a=S[e?0:1].y-n[e].top,S[e].socketId=Math.abs(t)>=Math.abs(a)?0<=t?w:M:0<=a?O:k))}))),m.position_path!==g.position_path||m.position_lineStrokeWidth!==g.position_lineStrokeWidth||[0,1].some((function(e){return m.position_plugOverheadSE[e]!==g.position_plugOverheadSE[e]||(n=S[e],a=g.position_socketXYSE[e],n.x!==a.x||n.y!==a.y||n.socketId!==a.socketId)||(n=t[e],a=g.position_socketGravitySE[e],(e=null==n?"auto":Array.isArray(n)?"array":"number")!=(null==a?"auto":Array.isArray(a)?"array":"number")||("array"==e?n[0]!==a[0]||n[1]!==a[1]:n!==a));var n,a}))){switch(e.pathList.baseVal=a=[],e.pathList.animVal=null,m.position_path){case I:a.push([b(S[0]),b(S[1])]);break;case L:d="number"==typeof t[0]&&0<t[0]||"number"==typeof t[1]&&0<t[1],d=(c=J*(d?-1:1))-(f=Math.atan2(S[1].y-S[0].y,S[1].x-S[0].x)),f=Math.PI-f-c,c=Ae(S[0],S[1])/Math.sqrt(2)*K,d={x:S[0].x+Math.cos(d)*c,y:S[0].y+Math.sin(d)*c*-1},c={x:S[1].x+Math.cos(f)*c,y:S[1].y+Math.sin(f)*c*-1},a.push([b(S[0]),d,c,b(S[1])]);break;case A:case V:u=[t[0],m.position_path===V?0:t[1]],h=[],p=[],S.forEach((function(e,t){var n,a=u[t],i=Array.isArray(a)?{x:a[0],y:a[1]}:"number"==typeof a?e.socketId===k?{x:0,y:-a}:e.socketId===w?{x:a,y:0}:e.socketId===O?{x:0,y:a}:{x:-a,y:0}:(n=S[t?0:1],a=0<(a=m.position_plugOverheadSE[t])?Z+(q<a?(a-q)*X:0):H+(m.position_lineStrokeWidth>Y?(m.position_lineStrokeWidth-Y)*U:0),e.socketId===k?{x:0,y:-(i=(i=(e.y-n.y)/2)<a?a:i)}:e.socketId===w?{x:i=(i=(n.x-e.x)/2)<a?a:i,y:0}:e.socketId===O?{x:0,y:i=(i=(n.y-e.y)/2)<a?a:i}:{x:-(i=(i=(e.x-n.x)/2)<a?a:i),y:0});h[t]=e.x+i.x,p[t]=e.y+i.y})),a.push([b(S[0]),{x:h[0],y:p[0]},{x:h[1],y:p[1]},b(S[1])]);break;case P:!function(){var e,n=1,i=2,o=3,s=4,r=[[],[]],l=[];function u(e){return e===n?o:e===i?s:e===o?n:i}function h(e){return e===i||e===s?"x":"y"}function p(e,t,a){var s={x:e.x,y:e.y};if(a){if(a===u(e.dirId))throw new Error("Invalid dirId: "+a);s.dirId=a}else s.dirId=e.dirId;return s.dirId===n?s.y-=t:s.dirId===i?s.x+=t:s.dirId===o?s.y+=t:s.x-=t,s}function d(e,t){return t.dirId===n?e.y<=t.y:t.dirId===i?e.x>=t.x:t.dirId===o?e.y>=t.y:e.x<=t.x}function c(e,t){return t.dirId===n||t.dirId===o?e.x===t.x:e.y===t.y}function f(e){return e[0]?{contain:0,notContain:1}:{contain:1,notContain:0}}function y(e,t,n){return Math.abs(t[n]-e[n])}function m(e,t,a){return"x"===a?e.x<t.x?i:s:e.y<t.y?o:n}for(S.forEach((function(e,a){var h=b(e),d=t[a];e=Array.isArray(d)?d[0]<0?[s,-d[0]]:0<d[0]?[i,d[0]]:d[1]<0?[n,-d[1]]:0<d[1]?[o,d[1]]:[e.socketId,0]:"number"!=typeof d?[e.socketId,Q]:0<=d?[e.socketId,d]:[u(e.socketId),-d],h.dirId=e[0],d=e[1],r[a].push(h),l[a]=p(h,d)}));function(){var e,t,n,a,s=[d(l[1],l[0]),d(l[0],l[1])],u=[h(l[0].dirId),h(l[1].dirId)];if(u[0]===u[1]){if(s[0]&&s[1])return void(c(l[1],l[0])||(l[0][u[0]]===l[1][u[1]]?(r[0].push(l[0]),r[1].push(l[1])):(e=l[0][u[0]]+(l[1][u[1]]-l[0][u[0]])/2,r[0].push(p(l[0],Math.abs(e-l[0][u[0]]))),r[1].push(p(l[1],Math.abs(e-l[1][u[1]]))))));s[0]!==s[1]?(t=f(s),(n=y(l[t.notContain],l[t.contain],u[t.notContain]))<Q&&(l[t.notContain]=p(l[t.notContain],Q-n)),r[t.notContain].push(l[t.notContain]),l[t.notContain]=p(l[t.notContain],Q,c(l[t.contain],l[t.notContain])?"x"===u[t.notContain]?o:i:m(l[t.notContain],l[t.contain],"x"===u[t.notContain]?"y":"x"))):(n=y(l[0],l[1],"x"===u[0]?"y":"x"),r.forEach((function(e,t){var a=0===t?1:0;e.push(l[t]),l[t]=p(l[t],Q,2*Q<=n?m(l[t],l[a],"x"===u[t]?"y":"x"):"x"===u[t]?o:i)})))}else{if(s[0]&&s[1])return void(c(l[1],l[0])?r[1].push(l[1]):c(l[0],l[1])?r[0].push(l[0]):r[0].push("x"===u[0]?{x:l[1].x,y:l[0].y}:{x:l[0].x,y:l[1].y}));s[0]!==s[1]?(t=f(s),r[t.notContain].push(l[t.notContain]),l[t.notContain]=p(l[t.notContain],Q,y(l[t.notContain],l[t.contain],u[t.contain])>=Q?m(l[t.notContain],l[t.contain],u[t.contain]):l[t.contain].dirId)):(a=[{x:l[0].x,y:l[0].y},{x:l[1].x,y:l[1].y}],r.forEach((function(e,t){var n=0===t?1:0,i=y(a[t],a[n],u[t]);i<Q&&(l[t]=p(l[t],Q-i)),e.push(l[t]),l[t]=p(l[t],Q,m(l[t],l[n],u[n]))})))}return 1}(););r[1].reverse(),r[0].concat(r[1]).forEach((function(t,n){t={x:t.x,y:t.y},0<n&&a.push([e,t]),e=t}))}()}l=[],m.position_plugOverheadSE.forEach((function(e,t){var i,o,s,r,u,h,p,d,c,f=!t;0<e?2===(i=a[o=f?0:a.length-1]).length?(l[o]=l[o]||Ae.apply(null,i),l[o]>$&&(l[o]-e<$&&(e=l[o]-$),p=Ve(i[0],i[1],(f?e:l[o]-e)/l[o]),a[o]=f?[p,i[1]]:[i[0],p],l[o]-=e)):(l[o]=l[o]||Te.apply(null,i),l[o]>$&&(l[o]-e<$&&(e=l[o]-$),p=Ne(i[0],i[1],i[2],i[3],Be(i[0],i[1],i[2],i[3],f?e:l[o]-e)),r=f?(s=i[0],p.toP1):(s=i[3],p.fromP2),u=Math.atan2(s.y-p.y,p.x-s.x),h=Ae(p,r),p.x=s.x+Math.cos(u)*e,p.y=s.y+Math.sin(u)*e*-1,r.x=p.x+Math.cos(u)*h,r.y=p.y+Math.sin(u)*h*-1,a[o]=f?[p,p.toP1,p.toP2,i[3]]:[i[0],p.fromP1,p.fromP2,p],l[o]=null)):e<0&&(i=a[o=f?0:a.length-1],p=S[t].socketId,t=-n[t]["x"==(d=p===M||p===w?"x":"y")?"width":"height"],c=(e=e<t?t:e)*(p===M||p===k?-1:1),2===i.length?i[f?0:i.length-1][d]+=c:(f?[0,1]:[i.length-2,i.length-1]).forEach((function(e){i[e][d]+=c})),l[o]=null)})),g.position_socketXYSE=we(S),g.position_plugOverheadSE=we(m.position_plugOverheadSE),g.position_path=m.position_path,g.position_lineStrokeWidth=m.position_lineStrokeWidth,g.position_socketGravitySE=we(t),_=!0,e.events.apl_position&&e.events.apl_position.forEach((function(t){t(e,a)}))}return _}function Ke(e,t){t!==e.isShown&&(!!t!=!!e.isShown&&(e.svg.style.visibility=t?"":"hidden"),e.isShown=t,e.events&&e.events.svgShow&&e.events.svgShow.forEach((function(n){n(e,t)})))}function Je(t,n){var a,i,o,s,r,l,u,h,p,d,c,f,y,m,g,S,_,v,b,E,x,k,w,O,M,C,I,L,A,V,P,N,B,W,D,F,j,H,Y,U,Z,q,X,$={};n.line&&($.line=(h=(a=t).options,i=a.curStats,p=a.events,d=!1,d=qe(a,i,"line_color",h.lineColor,p.cur_line_color)||d,d=qe(a,i,"line_colorTra",Oe(i.line_color)[0]<1)||d,d=qe(a,i,"line_strokeWidth",h.lineSize,p.cur_line_strokeWidth)||d)),(n.plug||$.line)&&($.plug=(s=(o=t).options,r=o.curStats,l=o.events,u=!1,[0,1].forEach((function(e){var t,n,a,i,h,p,d,c,f=s.plugSE[e];u=qe(o,r.plug_enabledSE,e,f!==T)||u,u=qe(o,r.plug_plugSE,e,f)||u,u=qe(o,r.plug_colorSE,e,c=s.plugColorSE[e]||r.line_color,l.cur_plug_colorSE)||u,u=qe(o,r.plug_colorTraSE,e,Oe(c)[0]<1)||u,f!==T&&(i=n=(t=G[R[f]]).widthR*s.plugSizeSE[e],h=a=t.heightR*s.plugSizeSE[e],oe&&(i*=r.line_strokeWidth,h*=r.line_strokeWidth),u=qe(o,r.plug_markerWidthSE,e,i)||u,u=qe(o,r.plug_markerHeightSE,e,h)||u,r.capsMaskMarker_markerWidthSE[e]=n,r.capsMaskMarker_markerHeightSE[e]=a),r.plugOutline_plugSE[e]=r.capsMaskMarker_plugSE[e]=f,r.plug_enabledSE[e]?(c=r.line_strokeWidth/re.lineSize*s.plugSizeSE[e],r.position_plugOverheadSE[e]=t.overhead*c,r.viewBox_plugBCircleSE[e]=t.bCircle*c,p=t.sideLen*c,d=t.backLen*c):(r.position_plugOverheadSE[e]=-r.line_strokeWidth/2,r.viewBox_plugBCircleSE[e]=p=d=0),qe(o,r.attach_plugSideLenSE,e,p,l.cur_attach_plugSideLenSE),qe(o,r.attach_plugBackLenSE,e,d,l.cur_attach_plugBackLenSE),r.capsMaskAnchor_enabledSE[e]=!r.plug_enabledSE[e]})),u=qe(o,r,"plug_enabled",r.plug_enabledSE[0]||r.plug_enabledSE[1])||u)),(n.lineOutline||$.line)&&($.lineOutline=(p=(h=t).options,w=!1,w=qe(h,d=h.curStats,"lineOutline_enabled",p.lineOutlineEnabled)||w,w=qe(h,d,"lineOutline_color",p.lineOutlineColor)||w,w=qe(h,d,"lineOutline_colorTra",Oe(d.lineOutline_color)[0]<1)||w,p=d.line_strokeWidth*p.lineOutlineSize,w=qe(h,d,"lineOutline_strokeWidth",d.line_strokeWidth-2*p)||w,w=qe(h,d,"lineOutline_inStrokeWidth",d.lineOutline_colorTra?d.lineOutline_strokeWidth+2*se:d.line_strokeWidth-p)||w)),(n.plugOutline||$.line||$.plug||$.lineOutline)&&($.plugOutline=(f=(c=t).options,y=c.curStats,m=!1,[0,1].forEach((function(e){var t=y.plugOutline_plugSE[e],n=t!==T?G[R[t]]:null;m=qe(c,y.plugOutline_enabledSE,e,f.plugOutlineEnabledSE[e]&&y.plug_enabled&&y.plug_enabledSE[e]&&!!n&&!!n.outlineBase)||m,m=qe(c,y.plugOutline_colorSE,e,t=f.plugOutlineColorSE[e]||y.lineOutline_color)||m,m=qe(c,y.plugOutline_colorTraSE,e,Oe(t)[0]<1)||m,n&&n.outlineBase&&((t=f.plugOutlineSizeSE[e])>n.outlineMax&&(t=n.outlineMax),t*=2*n.outlineBase,m=qe(c,y.plugOutline_strokeWidthSE,e,t)||m,m=qe(c,y.plugOutline_inStrokeWidthSE,e,y.plugOutline_colorTraSE[e]?t-se/(y.line_strokeWidth/re.lineSize)/f.plugSizeSE[e]*2:t/2)||m)})),m)),(n.faces||$.line||$.plug||$.lineOutline||$.plugOutline)&&($.faces=(_=(g=t).curStats,v=g.aplStats,b=g.events,E=!1,!_.line_altColor&&qe(g,v,"line_color",S=_.line_color,b.apl_line_color)&&(g.lineFace.style.stroke=S,E=!0),qe(g,v,"line_strokeWidth",S=_.line_strokeWidth,b.apl_line_strokeWidth)&&(g.lineShape.style.strokeWidth=S+"px",E=!0,(ae||ne)&&(ze(g,g.lineShape),ne&&(ze(g,g.lineFace),ze(g,g.lineMaskCaps)))),qe(g,v,"lineOutline_enabled",S=_.lineOutline_enabled,b.apl_lineOutline_enabled)&&(g.lineOutlineFace.style.display=S?"inline":"none",E=!0),_.lineOutline_enabled&&(qe(g,v,"lineOutline_color",S=_.lineOutline_color,b.apl_lineOutline_color)&&(g.lineOutlineFace.style.stroke=S,E=!0),qe(g,v,"lineOutline_strokeWidth",S=_.lineOutline_strokeWidth,b.apl_lineOutline_strokeWidth)&&(g.lineOutlineMaskShape.style.strokeWidth=S+"px",E=!0,ne&&(ze(g,g.lineOutlineMaskCaps),ze(g,g.lineOutlineFace))),qe(g,v,"lineOutline_inStrokeWidth",S=_.lineOutline_inStrokeWidth,b.apl_lineOutline_inStrokeWidth)&&(g.lineMaskShape.style.strokeWidth=S+"px",E=!0,ne&&(ze(g,g.lineOutlineMaskCaps),ze(g,g.lineOutlineFace)))),qe(g,v,"plug_enabled",S=_.plug_enabled,b.apl_plug_enabled)&&(g.plugsFace.style.display=S?"inline":"none",E=!0),_.plug_enabled&&[0,1].forEach((function(e){var t=_.plug_plugSE[e],n=t!==T?G[R[t]]:null,a=Ue(e,n);qe(g,v.plug_enabledSE,e,S=_.plug_enabledSE[e],b.apl_plug_enabledSE)&&(g.plugsFace.style[a.prop]=S?"url(#"+g.plugMarkerIdSE[e]+")":"none",E=!0),_.plug_enabledSE[e]&&(qe(g,v.plug_plugSE,e,t,b.apl_plug_plugSE)&&(g.plugFaceSE[e].href.baseVal="#"+n.elmId,Ye(g,g.plugMarkerSE[e],a.orient,n.bBox,g.svg,g.plugMarkerShapeSE[e],g.plugsFace),E=!0,ae&&ze(g,g.plugsFace)),qe(g,v.plug_colorSE,e,S=_.plug_colorSE[e],b.apl_plug_colorSE)&&(g.plugFaceSE[e].style.fill=S,E=!0,(ie||oe||ne)&&!_.line_colorTra&&ze(g,ne?g.lineMaskCaps:g.capsMaskLine)),["markerWidth","markerHeight"].forEach((function(t){var n="plug_"+t+"SE";qe(g,v[n],e,S=_[n][e],b["apl_"+n])&&(g.plugMarkerSE[e][t].baseVal.value=S,E=!0)})),qe(g,v.plugOutline_enabledSE,e,S=_.plugOutline_enabledSE[e],b.apl_plugOutline_enabledSE)&&(S?(g.plugFaceSE[e].style.mask="url(#"+g.plugMaskIdSE[e]+")",g.plugOutlineFaceSE[e].style.display="inline"):(g.plugFaceSE[e].style.mask="none",g.plugOutlineFaceSE[e].style.display="none"),E=!0),_.plugOutline_enabledSE[e]&&(qe(g,v.plugOutline_plugSE,e,t,b.apl_plugOutline_plugSE)&&(g.plugOutlineFaceSE[e].href.baseVal=g.plugMaskShapeSE[e].href.baseVal=g.plugOutlineMaskShapeSE[e].href.baseVal="#"+n.elmId,[g.plugMaskSE[e],g.plugOutlineMaskSE[e]].forEach((function(e){e.x.baseVal.value=n.bBox.left,e.y.baseVal.value=n.bBox.top,e.width.baseVal.value=n.bBox.width,e.height.baseVal.value=n.bBox.height})),E=!0),qe(g,v.plugOutline_colorSE,e,S=_.plugOutline_colorSE[e],b.apl_plugOutline_colorSE)&&(g.plugOutlineFaceSE[e].style.fill=S,E=!0,ne&&(ze(g,g.lineMaskCaps),ze(g,g.lineOutlineMaskCaps))),qe(g,v.plugOutline_strokeWidthSE,e,S=_.plugOutline_strokeWidthSE[e],b.apl_plugOutline_strokeWidthSE)&&(g.plugOutlineMaskShapeSE[e].style.strokeWidth=S+"px",E=!0),qe(g,v.plugOutline_inStrokeWidthSE,e,S=_.plugOutline_inStrokeWidthSE[e],b.apl_plugOutline_inStrokeWidthSE)&&(g.plugMaskShapeSE[e].style.strokeWidth=S+"px",E=!0)))})),E)),(n.position||$.line||$.plug)&&($.position=Qe(t)),(n.path||$.position)&&($.path=(w=(x=t).curStats,I=x.aplStats,C=x.pathList.animVal||x.pathList.baseVal,O=w.path_edge,L=!1,C&&(O.x1=O.x2=C[0][0].x,O.y1=O.y2=C[0][0].y,w.path_pathData=k=We(C,(function(e){e.x<O.x1&&(O.x1=e.x),e.y<O.y1&&(O.y1=e.y),e.x>O.x2&&(O.x2=e.x),e.y>O.y2&&(O.y2=e.y)})),De(k,I.path_pathData)&&(x.linePath.setPathData(k),I.path_pathData=k,L=!0,ne?(ze(x,x.plugsFace),ze(x,x.lineMaskCaps)):ae&&ze(x,x.linePath),x.events.apl_path&&x.events.apl_path.forEach((function(e){e(x,k)})))),L)),$.viewBox=(C=(M=t).curStats,I=M.aplStats,L=C.path_edge,A=C.viewBox_bBox,V=I.viewBox_bBox,P=M.svg.viewBox.baseVal,N=M.svg.style,B=!1,I=Math.max(C.line_strokeWidth/2,C.viewBox_plugBCircleSE[0]||0,C.viewBox_plugBCircleSE[1]||0),W={x1:L.x1-I,y1:L.y1-I,x2:L.x2+I,y2:L.y2+I},M.events.new_edge4viewBox&&M.events.new_edge4viewBox.forEach((function(e){e(M,W)})),A.x=C.lineMask_x=C.lineOutlineMask_x=C.maskBGRect_x=W.x1,A.y=C.lineMask_y=C.lineOutlineMask_y=C.maskBGRect_y=W.y1,A.width=W.x2-W.x1,A.height=W.y2-W.y1,["x","y","width","height"].forEach((function(e){var t;(t=A[e])!==V[e]&&(P[e]=V[e]=t,N[z[e]]=t+("x"===e||"y"===e?M.bodyOffset[e]:0)+"px",B=!0)})),B),$.mask=(j=(D=t).curStats,H=D.aplStats,Y=!1,j.plug_enabled?[0,1].forEach((function(e){j.capsMaskMarker_enabledSE[e]=j.plug_enabledSE[e]&&j.plug_colorTraSE[e]||j.plugOutline_enabledSE[e]&&j.plugOutline_colorTraSE[e]})):j.capsMaskMarker_enabledSE[0]=j.capsMaskMarker_enabledSE[1]=!1,j.capsMaskMarker_enabled=j.capsMaskMarker_enabledSE[0]||j.capsMaskMarker_enabledSE[1],j.lineMask_outlineMode=j.lineOutline_enabled,j.caps_enabled=j.capsMaskMarker_enabled||j.capsMaskAnchor_enabledSE[0]||j.capsMaskAnchor_enabledSE[1],j.lineMask_enabled=j.caps_enabled||j.lineMask_outlineMode,(j.lineMask_enabled&&!j.lineMask_outlineMode||j.lineOutline_enabled)&&["x","y"].forEach((function(e){var t="maskBGRect_"+e;qe(D,H,t,F=j[t])&&(D.maskBGRect[e].baseVal.value=F,Y=!0)})),qe(D,H,"lineMask_enabled",F=j.lineMask_enabled)&&(D.lineFace.style.mask=F?"url(#"+D.lineMaskId+")":"none",Y=!0,oe&&ze(D,D.lineMask)),j.lineMask_enabled&&(qe(D,H,"lineMask_outlineMode",F=j.lineMask_outlineMode)&&(F?(D.lineMaskBG.style.display="none",D.lineMaskShape.style.display="inline"):(D.lineMaskBG.style.display="inline",D.lineMaskShape.style.display="none"),Y=!0),["x","y"].forEach((function(e){var t="lineMask_"+e;qe(D,H,t,F=j[t])&&(D.lineMask[e].baseVal.value=F,Y=!0)})),qe(D,H,"caps_enabled",F=j.caps_enabled)&&(D.lineMaskCaps.style.display=D.lineOutlineMaskCaps.style.display=F?"inline":"none",Y=!0,oe&&ze(D,D.capsMaskLine)),j.caps_enabled&&([0,1].forEach((function(e){var t;qe(D,H.capsMaskAnchor_enabledSE,e,F=j.capsMaskAnchor_enabledSE[e])&&(D.capsMaskAnchorSE[e].style.display=F?"inline":"none",Y=!0,oe&&ze(D,D.lineMask)),j.capsMaskAnchor_enabledSE[e]&&(De(t=j.capsMaskAnchor_pathDataSE[e],H.capsMaskAnchor_pathDataSE[e])&&(D.capsMaskAnchorSE[e].setPathData(t),H.capsMaskAnchor_pathDataSE[e]=t,Y=!0),qe(D,H.capsMaskAnchor_strokeWidthSE,e,F=j.capsMaskAnchor_strokeWidthSE[e])&&(D.capsMaskAnchorSE[e].style.strokeWidth=F+"px",Y=!0))})),qe(D,H,"capsMaskMarker_enabled",F=j.capsMaskMarker_enabled)&&(D.capsMaskLine.style.display=F?"inline":"none",Y=!0),j.capsMaskMarker_enabled&&[0,1].forEach((function(e){var t=j.capsMaskMarker_plugSE[e],n=t!==T?G[R[t]]:null,a=Ue(e,n);qe(D,H.capsMaskMarker_enabledSE,e,F=j.capsMaskMarker_enabledSE[e])&&(D.capsMaskLine.style[a.prop]=F?"url(#"+D.lineMaskMarkerIdSE[e]+")":"none",Y=!0),j.capsMaskMarker_enabledSE[e]&&(qe(D,H.capsMaskMarker_plugSE,e,t)&&(D.capsMaskMarkerShapeSE[e].href.baseVal="#"+n.elmId,Ye(D,D.capsMaskMarkerSE[e],a.orient,n.bBox,D.svg,D.capsMaskMarkerShapeSE[e],D.capsMaskLine),Y=!0,ae&&(ze(D,D.capsMaskLine),ze(D,D.lineFace))),["markerWidth","markerHeight"].forEach((function(t){var n="capsMaskMarker_"+t+"SE";qe(D,H[n],e,F=j[n][e])&&(D.capsMaskMarkerSE[e][t].baseVal.value=F,Y=!0)})))})))),j.lineOutline_enabled&&["x","y"].forEach((function(e){var t="lineOutlineMask_"+e;qe(D,H,t,F=j[t])&&(D.lineOutlineMask[e].baseVal.value=F,Y=!0)})),Y),n.effect&&(q=(U=t).curStats,X=U.aplStats,Object.keys(e).forEach((function(t){var n=e[t],a=t+"_enabled",i=t+"_options";t=q[i],qe(U,X,a,Z=q[a])?(Z&&(X[i]=we(t)),n[Z?"init":"remove"](U)):Z&&ke(t,X[i])&&(n.remove(U),X[a]=!0,X[i]=we(t),n.init(U))}))),(ie||oe)&&$.line&&!$.path&&ze(t,t.lineShape),ie&&$.plug&&!$.line&&ze(t,t.plugsFace),He(t)}function et(e,t){return{duration:(ue(e.duration)&&0<e.duration?e:t).duration,timing:he.validTiming(e.timing)?e.timing:we(t.timing)}}function tt(e,n,a,i){var o=e.curStats,s=e.aplStats,r={};function l(){["show_on","show_effect","show_animOptions"].forEach((function(e){s[e]=o[e]}))}o.show_on=n,a&&t[a]&&(o.show_effect=a,o.show_animOptions=et(le(i)?i:{},t[a].defaultAnimOptions)),r.show_on=o.show_on!==s.show_on,r.show_effect=o.show_effect!==s.show_effect,r.show_animOptions=ke(o.show_animOptions,s.show_animOptions),r.show_effect||r.show_animOptions?o.show_inAnim?(a=r.show_effect?t[s.show_effect].stop(e,!0,!0):t[s.show_effect].stop(e),l(),t[s.show_effect].init(e,a)):r.show_on&&(s.show_effect&&r.show_effect&&t[s.show_effect].stop(e,!0,!0),l(),t[s.show_effect].init(e)):r.show_on&&(l(),t[s.show_effect].start(e))}function nt(e,t,n){return n={props:e,optionName:n},e.attachments.indexOf(t)<0&&(!t.conf.bind||t.conf.bind(t,n))&&(e.attachments.push(t),t.boundTargets.push(n),1)}function at(e,t,n){var a=e.attachments.indexOf(t);-1<a&&e.attachments.splice(a,1),t.boundTargets.some((function(n,i){return n.props===e&&(t.conf.unbind&&t.conf.unbind(t,n),a=i,!0)}))&&(t.boundTargets.splice(a,1),n||je((function(){t.boundTargets.length||o(t)})))}function it(o,s){var r,l,u,h,p,d,c,f,y,m,g,S,_,v,b,E=o.options,k={};function w(e,t,n,a,i){var o={};return n?null!=a?(o.container=e[n],o.key=a):(o.container=e,o.key=n):(o.container=e,o.key=t),o.default=i,o.acceptsAuto=null==o.default,o}function O(e,t,n,a,i,o,s){var r,l,u;return s=w(e,n,i,o,s),null!=t[n]&&(l=(t[n]+"").toLowerCase())&&(s.acceptsAuto&&l===j||(u=a[l]))&&u!==s.container[s.key]&&(s.container[s.key]=u,r=!0),null!=s.container[s.key]||s.acceptsAuto||(s.container[s.key]=s.default,r=!0),r}function M(e,t,n,a,i,o,s,r,l){var u,h,p,d;if(s=w(e,n,i,o,s),!a){if(null==s.default)throw new Error("Invalid `type`: "+n);a=typeof s.default}return null!=t[n]&&(s.acceptsAuto&&(t[n]+"").toLowerCase()===j||(p=h=t[n],("number"===(d=a)?ue(p):typeof p===d)&&(h=l&&"string"===a&&h?h.trim():h,1)&&(!r||r(h))))&&h!==s.container[s.key]&&(s.container[s.key]=h,u=!0),null!=s.container[s.key]||s.acceptsAuto||(s.container[s.key]=s.default,u=!0),u}if(s=s||{},["start","end"].forEach((function(e,t){var n=s[e],a=!1;if(n&&(Me(n)||(a=i(n,"anchor")))&&n!==E.anchorSE[t]){if(!1!==o.optionIsAttach.anchorSE[t]&&at(o,_e[E.anchorSE[t]._id]),a&&!nt(o,_e[n._id],e))throw new Error("Can't bind attachment");E.anchorSE[t]=n,o.optionIsAttach.anchorSE[t]=a,r=k.position=!0}})),!E.anchorSE[0]||!E.anchorSE[1]||E.anchorSE[0]===E.anchorSE[1])throw new Error("`start` and `end` are required.");function I(e){var t=p.appendChild(v.createElementNS(te,"mask"));return t.id=e,t.maskUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[t.x,t.y,t.width,t.height].forEach((function(e){e.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)})),t}function L(e){var t=p.appendChild(v.createElementNS(te,"marker"));return t.id=e,t.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_STROKEWIDTH,t.viewBox.baseVal||t.setAttribute("viewBox","0 0 0 0"),t}function A(e){return[e.width,e.height].forEach((function(e){e.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100)})),e}r&&(g=function(e,t){var n,a;if(!(e=Ie(e))||!(n=Ie(t)))throw new Error("Cannot get frames.");return e.length&&n.length&&(e.reverse(),n.reverse(),e.some((function(e){return n.some((function(t){return t===e&&(a=t.contentWindow,!0)}))}))),a||window}(!1!==o.optionIsAttach.anchorSE[0]?_e[E.anchorSE[0]._id].element:E.anchorSE[0],!1!==o.optionIsAttach.anchorSE[1]?_e[E.anchorSE[1]._id].element:E.anchorSE[1]))!==o.baseWindow&&(u=g,_=(l=o).aplStats,v=u.document,b=x+"-"+l._id,l.pathList={},Ze(_,ce),Object.keys(e).forEach((function(t){var n=t+"_enabled";_[n]&&(e[t].remove(l),_[n]=!1)})),l.baseWindow&&l.svg&&l.baseWindow.document.body.removeChild(l.svg),$e(l.baseWindow=u),l.bodyOffset=Xe(u),l.svg=h=v.createElementNS(te,"svg"),h.className.baseVal=x,h.viewBox.baseVal||h.setAttribute("viewBox","0 0 0 0"),l.defs=p=h.appendChild(v.createElementNS(te,"defs")),l.linePath=c=p.appendChild(v.createElementNS(te,"path")),c.id=f=b+"-line-path",c.className.baseVal=x+"-line-path",oe&&(c.style.fill="none"),l.lineShape=c=p.appendChild(v.createElementNS(te,"use")),c.id=y=b+"-line-shape",c.href.baseVal="#"+f,(d=p.appendChild(v.createElementNS(te,"g"))).id=m=b+"-caps",l.capsMaskAnchorSE=[0,1].map((function(){var e=d.appendChild(v.createElementNS(te,"path"));return e.className.baseVal=x+"-caps-mask-anchor",e})),l.lineMaskMarkerIdSE=[b+"-caps-mask-marker-0",b+"-caps-mask-marker-1"],l.capsMaskMarkerSE=[0,1].map((function(e){return L(l.lineMaskMarkerIdSE[e])})),l.capsMaskMarkerShapeSE=[0,1].map((function(e){return(e=l.capsMaskMarkerSE[e].appendChild(v.createElementNS(te,"use"))).className.baseVal=x+"-caps-mask-marker-shape",e})),l.capsMaskLine=c=d.appendChild(v.createElementNS(te,"use")),c.className.baseVal=x+"-caps-mask-line",c.href.baseVal="#"+y,l.maskBGRect=c=A(p.appendChild(v.createElementNS(te,"rect"))),c.id=g=b+"-mask-bg-rect",c.className.baseVal=x+"-mask-bg-rect",oe&&(c.style.fill="white"),l.lineMask=A(I(l.lineMaskId=b+"-line-mask")),l.lineMaskBG=c=l.lineMask.appendChild(v.createElementNS(te,"use")),c.href.baseVal="#"+g,l.lineMaskShape=c=l.lineMask.appendChild(v.createElementNS(te,"use")),c.className.baseVal=x+"-line-mask-shape",c.href.baseVal="#"+f,c.style.display="none",l.lineMaskCaps=c=l.lineMask.appendChild(v.createElementNS(te,"use")),c.href.baseVal="#"+m,l.lineOutlineMask=A(I(u=b+"-line-outline-mask")),(c=l.lineOutlineMask.appendChild(v.createElementNS(te,"use"))).href.baseVal="#"+g,l.lineOutlineMaskShape=c=l.lineOutlineMask.appendChild(v.createElementNS(te,"use")),c.className.baseVal=x+"-line-outline-mask-shape",c.href.baseVal="#"+f,l.lineOutlineMaskCaps=c=l.lineOutlineMask.appendChild(v.createElementNS(te,"use")),c.href.baseVal="#"+m,l.face=h.appendChild(v.createElementNS(te,"g")),l.lineFace=c=l.face.appendChild(v.createElementNS(te,"use")),c.href.baseVal="#"+y,l.lineOutlineFace=c=l.face.appendChild(v.createElementNS(te,"use")),c.href.baseVal="#"+y,c.style.mask="url(#"+u+")",c.style.display="none",l.plugMaskIdSE=[b+"-plug-mask-0",b+"-plug-mask-1"],l.plugMaskSE=[0,1].map((function(e){return I(l.plugMaskIdSE[e])})),l.plugMaskShapeSE=[0,1].map((function(e){return(e=l.plugMaskSE[e].appendChild(v.createElementNS(te,"use"))).className.baseVal=x+"-plug-mask-shape",e})),S=[],l.plugOutlineMaskSE=[0,1].map((function(e){return I(S[e]=b+"-plug-outline-mask-"+e)})),l.plugOutlineMaskShapeSE=[0,1].map((function(e){return(e=l.plugOutlineMaskSE[e].appendChild(v.createElementNS(te,"use"))).className.baseVal=x+"-plug-outline-mask-shape",e})),l.plugMarkerIdSE=[b+"-plug-marker-0",b+"-plug-marker-1"],l.plugMarkerSE=[0,1].map((function(e){return e=L(l.plugMarkerIdSE[e]),oe&&(e.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_USERSPACEONUSE),e})),l.plugMarkerShapeSE=[0,1].map((function(e){return l.plugMarkerSE[e].appendChild(v.createElementNS(te,"g"))})),l.plugFaceSE=[0,1].map((function(e){return l.plugMarkerShapeSE[e].appendChild(v.createElementNS(te,"use"))})),l.plugOutlineFaceSE=[0,1].map((function(e){var t=l.plugMarkerShapeSE[e].appendChild(v.createElementNS(te,"use"));return t.style.mask="url(#"+S[e]+")",t.style.display="none",t})),l.plugsFace=c=l.face.appendChild(v.createElementNS(te,"use")),c.className.baseVal=x+"-plugs-face",c.href.baseVal="#"+y,c.style.display="none",l.curStats.show_inAnim?(l.isShown=1,t[_.show_effect].stop(l,!0)):l.isShown||(h.style.visibility="hidden"),v.body.appendChild(h),[0,1,2].forEach((function(e){var t;(e=l.options.labelSEM[e])&&i(e,"label")&&(t=_e[e._id]).conf.initSvg&&t.conf.initSvg(t,l)})),k.line=k.plug=k.lineOutline=k.plugOutline=k.faces=k.effect=!0),k.position=O(E,s,"path",N,null,null,re.path)||k.position,k.position=O(E,s,"startSocket",C,"socketSE",0)||k.position,k.position=O(E,s,"endSocket",C,"socketSE",1)||k.position,[s.startSocketGravity,s.endSocketGravity].forEach((function(e,t){var n,a,i=!1;null!=e&&(Array.isArray(e)?ue(e[0])&&ue(e[1])&&(i=[e[0],e[1]],Array.isArray(E.socketGravitySE[t])&&(n=i,a=E.socketGravitySE[t],n.length===a.length&&n.every((function(e,t){return e===a[t]})))&&(i=!1)):((e+"").toLowerCase()===j?i=null:ue(e)&&0<=e&&(i=e),i===E.socketGravitySE[t]&&(i=!1)),!1!==i&&(E.socketGravitySE[t]=i,k.position=!0))})),k.line=M(E,s,"color",null,"lineColor",null,re.lineColor,null,!0)||k.line,k.line=M(E,s,"size",null,"lineSize",null,re.lineSize,(function(e){return 0<e}))||k.line,["startPlug","endPlug"].forEach((function(e,t){k.plug=O(E,s,e,D,"plugSE",t,re.plugSE[t])||k.plug,k.plug=M(E,s,e+"Color","string","plugColorSE",t,null,null,!0)||k.plug,k.plug=M(E,s,e+"Size",null,"plugSizeSE",t,re.plugSizeSE[t],(function(e){return 0<e}))||k.plug})),k.lineOutline=M(E,s,"outline",null,"lineOutlineEnabled",null,re.lineOutlineEnabled)||k.lineOutline,k.lineOutline=M(E,s,"outlineColor",null,"lineOutlineColor",null,re.lineOutlineColor,null,!0)||k.lineOutline,k.lineOutline=M(E,s,"outlineSize",null,"lineOutlineSize",null,re.lineOutlineSize,(function(e){return 0<e&&e<=.48}))||k.lineOutline,["startPlugOutline","endPlugOutline"].forEach((function(e,t){k.plugOutline=M(E,s,e,null,"plugOutlineEnabledSE",t,re.plugOutlineEnabledSE[t])||k.plugOutline,k.plugOutline=M(E,s,e+"Color","string","plugOutlineColorSE",t,null,null,!0)||k.plugOutline,k.plugOutline=M(E,s,e+"Size",null,"plugOutlineSizeSE",t,re.plugOutlineSizeSE[t],(function(e){return 1<=e}))||k.plugOutline})),["startLabel","endLabel","middleLabel"].forEach((function(e,t){var r,l,u,h=s[e],p=E.labelSEM[t]&&!o.optionIsAttach.labelSEM[t]?_e[E.labelSEM[t]._id].text:E.labelSEM[t],d=!1;if((r="string"==typeof h)&&(h=h.trim()),(r||h&&(d=i(h,"label")))&&h!==p){if(E.labelSEM[t]&&(at(o,_e[E.labelSEM[t]._id]),E.labelSEM[t]=""),h){if(d?(l=_e[(u=h)._id]).boundTargets.slice().forEach((function(e){l.conf.removeOption(l,e)})):u=new a(n.captionLabel,[h]),!nt(o,_e[u._id],e))throw new Error("Can't bind attachment");E.labelSEM[t]=u}o.optionIsAttach.labelSEM[t]=d}})),Object.keys(e).forEach((function(t){var n,a,i=e[t],r=t+"_enabled",l=t+"_options";function u(e){var t={};return i.optionsConf.forEach((function(n){var a=n[0],i=n[3];null==n[4]||t[i]||(t[i]=[]),("function"==typeof a?a:"id"===a?O:M).apply(null,[t,e].concat(n.slice(1)))})),t}function h(e){var n,a=t+"_animOptions";return e.hasOwnProperty("animation")?le(e.animation)?n=o.curStats[a]=et(e.animation,i.defaultAnimOptions):(n=!!e.animation,o.curStats[a]=n?et({},i.defaultAnimOptions):null):(n=!!i.defaultEnabled,o.curStats[a]=n?et({},i.defaultAnimOptions):null),n}s.hasOwnProperty(t)&&(n=s[t],le(n)?(o.curStats[r]=!0,a=o.curStats[l]=u(n),i.anim&&(o.curStats[l].animation=h(n))):(a=o.curStats[r]=!!n)&&(o.curStats[l]=u({}),i.anim&&(o.curStats[l].animation=h({}))),ke(a,E[t])&&(E[t]=a,k.effect=!0))})),Je(o,k)}function ot(n,a,i){var o={options:{anchorSE:[],socketSE:[],socketGravitySE:[],plugSE:[],plugColorSE:[],plugSizeSE:[],plugOutlineEnabledSE:[],plugOutlineColorSE:[],plugOutlineSizeSE:[],labelSEM:["","",""]},optionIsAttach:{anchorSE:[!1,!1],labelSEM:[!1,!1,!1]},curStats:{},aplStats:{},attachments:[],events:{},reflowTargets:[]};Ze(o.curStats,ce),Ze(o.aplStats,ce),Object.keys(e).forEach((function(t){var n=e[t].stats;Ze(o.curStats,n),Ze(o.aplStats,n),o.options[t]=!1})),Ze(o.curStats,fe),Ze(o.aplStats,fe),o.curStats.show_effect=ye,o.curStats.show_animOptions=we(t[ye].defaultAnimOptions),Object.defineProperty(this,"_id",{value:++Se}),o._id=this._id,ge[this._id]=o,1===arguments.length&&(i=n,n=null),i=i||{},(n||a)&&(i=we(i),n&&(i.start=n),a&&(i.end=a)),o.isShown=o.aplStats.show_on=!i.hide,this.setOptions(i)}function st(e){return function(t){var n={};n[e]=t,this.setOptions(n)}}function rt(e,t){var n,a={conf:e,curStats:{},aplStats:{},boundTargets:[]},i={};e.argOptions.every((function(e){return!(!t.length||("string"==typeof e.type?typeof t[0]!==e.type:"function"!=typeof e.type||!e.type(t[0]))||(i[e.optionName]=t.shift(),0))})),n=t.length&&le(t[0])?we(t[0]):{},Object.keys(i).forEach((function(e){n[e]=i[e]})),e.stats&&(Ze(a.curStats,e.stats),Ze(a.aplStats,e.stats)),Object.defineProperty(this,"_id",{value:++ve}),Object.defineProperty(this,"isRemoved",{get:function(){return!_e[this._id]}}),a._id=this._id,e.init&&!e.init(a,n)||(_e[this._id]=a)}return e={dash:{stats:{dash_len:{},dash_gap:{},dash_maxOffset:{}},anim:!0,defaultAnimOptions:{duration:1e3,timing:"linear"},optionsConf:[["type","len","number",null,null,null,function(e){return 0<e}],["type","gap","number",null,null,null,function(e){return 0<e}]],init:function(t){Re(t,"apl_line_strokeWidth",e.dash.update),t.lineFace.style.strokeDashoffset=0,e.dash.update(t)},remove:function(t){var n=t.curStats;Fe(t,"apl_line_strokeWidth",e.dash.update),n.dash_animId&&(he.remove(n.dash_animId),n.dash_animId=null),t.lineFace.style.strokeDasharray="none",t.lineFace.style.strokeDashoffset=0,Ze(t.aplStats,e.dash.stats)},update:function(e){var t,n=e.curStats,a=e.aplStats,i=a.dash_options,o=!1;n.dash_len=i.len||2*a.line_strokeWidth,n.dash_gap=i.gap||a.line_strokeWidth,n.dash_maxOffset=n.dash_len+n.dash_gap,o=qe(e,a,"dash_len",n.dash_len)||o,(o=qe(e,a,"dash_gap",n.dash_gap)||o)&&(e.lineFace.style.strokeDasharray=a.dash_len+","+a.dash_gap),n.dash_animOptions?(o=qe(e,a,"dash_maxOffset",n.dash_maxOffset),a.dash_animOptions&&(o||ke(n.dash_animOptions,a.dash_animOptions))&&(n.dash_animId&&(t=he.stop(n.dash_animId),he.remove(n.dash_animId)),a.dash_animOptions=null),a.dash_animOptions||(n.dash_animId=he.add((function(e){return(1-e)*a.dash_maxOffset+"px"}),(function(t){e.lineFace.style.strokeDashoffset=t}),n.dash_animOptions.duration,0,n.dash_animOptions.timing,!1,t),a.dash_animOptions=we(n.dash_animOptions))):a.dash_animOptions&&(n.dash_animId&&(he.remove(n.dash_animId),n.dash_animId=null),e.lineFace.style.strokeDashoffset=0,a.dash_animOptions=null)}},gradient:{stats:{gradient_colorSE:{hasSE:!0},gradient_pointSE:{hasSE:!0,hasProps:!0}},optionsConf:[["type","startColor","string","colorSE",0,null,null,!0],["type","endColor","string","colorSE",1,null,null,!0]],init:function(t){var n=t.baseWindow.document,a=t.defs,i=x+"-"+t._id+"-gradient";t.efc_gradient_gradient=a=a.appendChild(n.createElementNS(te,"linearGradient")),a.id=i,a.gradientUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[a.x1,a.y1,a.x2,a.y2].forEach((function(e){e.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)})),t.efc_gradient_stopSE=[0,1].map((function(e){var a=t.efc_gradient_gradient.appendChild(n.createElementNS(te,"stop"));try{a.offset.baseVal=e}catch(t){if(t.code!==DOMException.NO_MODIFICATION_ALLOWED_ERR)throw t;a.setAttribute("offset",e)}return a})),Re(t,"cur_plug_colorSE",e.gradient.update),Re(t,"apl_path",e.gradient.update),t.curStats.line_altColor=!0,t.lineFace.style.stroke="url(#"+i+")",e.gradient.update(t)},remove:function(t){t.efc_gradient_gradient&&(t.defs.removeChild(t.efc_gradient_gradient),t.efc_gradient_gradient=t.efc_gradient_stopSE=null),Fe(t,"cur_plug_colorSE",e.gradient.update),Fe(t,"apl_path",e.gradient.update),t.curStats.line_altColor=!1,t.lineFace.style.stroke=t.curStats.line_color,Ze(t.aplStats,e.gradient.stats)},update:function(e){var t,n=e.curStats,a=e.aplStats,i=a.gradient_options,o=e.pathList.animVal||e.pathList.baseVal;[0,1].forEach((function(e){n.gradient_colorSE[e]=i.colorSE[e]||n.plug_colorSE[e]})),t=o[0][0],n.gradient_pointSE[0]={x:t.x,y:t.y},t=(o=o[o.length-1])[o.length-1],n.gradient_pointSE[1]={x:t.x,y:t.y},[0,1].forEach((function(t){var i;qe(e,a.gradient_colorSE,t,i=n.gradient_colorSE[t])&&(oe?(i=Oe(i),e.efc_gradient_stopSE[t].style.stopColor=i[1],e.efc_gradient_stopSE[t].style.stopOpacity=i[0]):e.efc_gradient_stopSE[t].style.stopColor=i),["x","y"].forEach((function(o){(i=n.gradient_pointSE[t][o])!==a.gradient_pointSE[t][o]&&(e.efc_gradient_gradient[o+(t+1)].baseVal.value=a.gradient_pointSE[t][o]=i)}))}))}},dropShadow:{stats:{dropShadow_dx:{},dropShadow_dy:{},dropShadow_blur:{},dropShadow_color:{},dropShadow_opacity:{},dropShadow_x:{},dropShadow_y:{}},optionsConf:[["type","dx",null,null,null,2],["type","dy",null,null,null,4],["type","blur",null,null,null,3,function(e){return 0<=e}],["type","color",null,null,null,"#000",null,!0],["type","opacity",null,null,null,.8,function(e){return 0<=e&&e<=1}]],init:function(t){var n,a,i,o,s=t.baseWindow.document,r=t.defs,l=x+"-"+t._id+"-dropShadow",h=(n=s,a=l,o={},"boolean"!=typeof u&&(u=!!window.SVGFEDropShadowElement&&!oe),o.elmsAppend=[o.elmFilter=s=n.createElementNS(te,"filter")],s.filterUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,s.x.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),s.y.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),s.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),s.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),s.id=a,u?(o.elmOffset=o.elmBlur=i=s.appendChild(n.createElementNS(te,"feDropShadow")),o.styleFlood=i.style):(o.elmBlur=s.appendChild(n.createElementNS(te,"feGaussianBlur")),o.elmOffset=i=s.appendChild(n.createElementNS(te,"feOffset")),i.result.baseVal="offsetblur",i=s.appendChild(n.createElementNS(te,"feFlood")),o.styleFlood=i.style,(i=s.appendChild(n.createElementNS(te,"feComposite"))).in2.baseVal="offsetblur",i.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_IN,(i=s.appendChild(n.createElementNS(te,"feMerge"))).appendChild(n.createElementNS(te,"feMergeNode")),i.appendChild(n.createElementNS(te,"feMergeNode")).in1.baseVal="SourceGraphic"),o);["elmFilter","elmOffset","elmBlur","styleFlood","elmsAppend"].forEach((function(e){t["efc_dropShadow_"+e]=h[e]})),h.elmsAppend.forEach((function(e){r.appendChild(e)})),t.face.setAttribute("filter","url(#"+l+")"),Re(t,"new_edge4viewBox",e.dropShadow.adjustEdge),e.dropShadow.update(t)},remove:function(t){var n=t.defs;t.efc_dropShadow_elmsAppend&&(t.efc_dropShadow_elmsAppend.forEach((function(e){n.removeChild(e)})),t.efc_dropShadow_elmFilter=t.efc_dropShadow_elmOffset=t.efc_dropShadow_elmBlur=t.efc_dropShadow_styleFlood=t.efc_dropShadow_elmsAppend=null),Fe(t,"new_edge4viewBox",e.dropShadow.adjustEdge),Je(t,{}),t.face.removeAttribute("filter"),Ze(t.aplStats,e.dropShadow.stats)},update:function(e){var t,n,a=e.curStats,i=e.aplStats,o=i.dropShadow_options;a.dropShadow_dx=t=o.dx,qe(e,i,"dropShadow_dx",t)&&(e.efc_dropShadow_elmOffset.dx.baseVal=t,n=!0),a.dropShadow_dy=t=o.dy,qe(e,i,"dropShadow_dy",t)&&(e.efc_dropShadow_elmOffset.dy.baseVal=t,n=!0),a.dropShadow_blur=t=o.blur,qe(e,i,"dropShadow_blur",t)&&(e.efc_dropShadow_elmBlur.setStdDeviation(t,t),n=!0),n&&Je(e,{}),a.dropShadow_color=t=o.color,qe(e,i,"dropShadow_color",t)&&(e.efc_dropShadow_styleFlood.floodColor=t),a.dropShadow_opacity=t=o.opacity,qe(e,i,"dropShadow_opacity",t)&&(e.efc_dropShadow_styleFlood.floodOpacity=t)},adjustEdge:function(e,t){var n,a=e.curStats,i=e.aplStats;null!=a.dropShadow_dx&&(n=3*a.dropShadow_blur,(n={x1:t.x1-n+a.dropShadow_dx,y1:t.y1-n+a.dropShadow_dy,x2:t.x2+n+a.dropShadow_dx,y2:t.y2+n+a.dropShadow_dy}).x1<t.x1&&(t.x1=n.x1),n.y1<t.y1&&(t.y1=n.y1),n.x2>t.x2&&(t.x2=n.x2),n.y2>t.y2&&(t.y2=n.y2),["x","y"].forEach((function(n){var o,s="dropShadow_"+n;a[s]=o=t[n+"1"],qe(e,i,s,o)&&(e.efc_dropShadow_elmFilter[n].baseVal.value=o)})))}}},Object.keys(e).forEach((function(t){var n=e[t],a=n.stats;a[t+"_enabled"]={iniValue:!1},a[t+"_options"]={hasProps:!0},n.anim&&(a[t+"_animOptions"]={},a[t+"_animId"]={})})),t={none:{defaultAnimOptions:{},init:function(e,n){var a=e.curStats;a.show_animId&&(he.remove(a.show_animId),a.show_animId=null),t.none.start(e,n)},start:function(e,n){t.none.stop(e,!0)},stop:function(e,t,n){var a=e.curStats;return n=null!=n?n:e.aplStats.show_on,a.show_inAnim=!1,t&&Ke(e,n),n?1:0}},fade:{defaultAnimOptions:{duration:300,timing:"linear"},init:function(e,n){var a=e.curStats,i=e.aplStats;a.show_animId&&he.remove(a.show_animId),a.show_animId=he.add((function(e){return e}),(function(n,a){a?t.fade.stop(e,!0):(e.svg.style.opacity=n+"",ne&&(ze(e,e.svg),He(e)))}),i.show_animOptions.duration,1,i.show_animOptions.timing,null,!1),t.fade.start(e,n)},start:function(e,t){var n,a=e.curStats;a.show_inAnim&&(n=he.stop(a.show_animId)),Ke(e,1),a.show_inAnim=!0,he.start(a.show_animId,!e.aplStats.show_on,null!=t?t:n)},stop:function(e,t,n){var a,i=e.curStats;return n=null!=n?n:e.aplStats.show_on,a=i.show_inAnim?he.stop(i.show_animId):n?1:0,i.show_inAnim=!1,t&&(e.svg.style.opacity=n?"":"0",Ke(e,n)),a}},draw:{defaultAnimOptions:{duration:500,timing:[.58,0,.42,1]},init:function(e,n){var a=e.curStats,i=e.aplStats,o=e.pathList.baseVal,s=Ge(o),r=s.segsLen,l=s.lenAll;a.show_animId&&he.remove(a.show_animId),a.show_animId=he.add((function(e){var t,n,a,i=-1;if(0===e)n=[[o[0][0],o[0][0]]];else if(1===e)n=o;else{for(t=l*e,n=[];t>=r[++i];)n.push(o[i]),t-=r[i];t&&(2===(a=o[i]).length?n.push([a[0],Ve(a[0],a[1],t/r[i])]):(e=Ne(a[0],a[1],a[2],a[3],Be(a[0],a[1],a[2],a[3],t)),n.push([a[0],e.fromP1,e.fromP2,e])))}return n}),(function(n,a){a?t.draw.stop(e,!0):(e.pathList.animVal=n,Je(e,{path:!0}))}),i.show_animOptions.duration,1,i.show_animOptions.timing,null,!1),t.draw.start(e,n)},start:function(e,n){var a,i=e.curStats;i.show_inAnim&&(a=he.stop(i.show_animId)),Ke(e,1),i.show_inAnim=!0,Re(e,"apl_position",t.draw.update),he.start(i.show_animId,!e.aplStats.show_on,null!=n?n:a)},stop:function(e,t,n){var a,i=e.curStats;return n=null!=n?n:e.aplStats.show_on,a=i.show_inAnim?he.stop(i.show_animId):n?1:0,i.show_inAnim=!1,t&&(e.pathList.animVal=n?null:[[e.pathList.baseVal[0][0],e.pathList.baseVal[0][0]]],Je(e,{path:!0}),Ke(e,n)),a},update:function(e){Fe(e,"apl_position",t.draw.update),e.curStats.show_inAnim?t.draw.init(e,t.draw.stop(e)):e.aplStats.show_animOptions={}}}},[["start","anchorSE",0],["end","anchorSE",1],["color","lineColor"],["size","lineSize"],["startSocketGravity","socketGravitySE",0],["endSocketGravity","socketGravitySE",1],["startPlugColor","plugColorSE",0],["endPlugColor","plugColorSE",1],["startPlugSize","plugSizeSE",0],["endPlugSize","plugSizeSE",1],["outline","lineOutlineEnabled"],["outlineColor","lineOutlineColor"],["outlineSize","lineOutlineSize"],["startPlugOutline","plugOutlineEnabledSE",0],["endPlugOutline","plugOutlineEnabledSE",1],["startPlugOutlineColor","plugOutlineColorSE",0],["endPlugOutlineColor","plugOutlineColorSE",1],["startPlugOutlineSize","plugOutlineSizeSE",0],["endPlugOutlineSize","plugOutlineSizeSE",1]].forEach((function(e){var t=e[0],n=e[1],a=e[2];Object.defineProperty(ot.prototype,t,{get:function(){var e=null!=a?ge[this._id].options[n][a]:n?ge[this._id].options[n]:ge[this._id].options[t];return null==e?j:we(e)},set:st(t),enumerable:!0})})),[["path",N],["startSocket",C,"socketSE",0],["endSocket",C,"socketSE",1],["startPlug",D,"plugSE",0],["endPlug",D,"plugSE",1]].forEach((function(e){var t=e[0],n=e[1],a=e[2],i=e[3];Object.defineProperty(ot.prototype,t,{get:function(){var e,o=null!=i?ge[this._id].options[a][i]:a?ge[this._id].options[a]:ge[this._id].options[t];return o?Object.keys(n).some((function(t){return n[t]===o&&(e=t,!0)}))?e:new Error("It's broken"):j},set:st(t),enumerable:!0})})),Object.keys(e).forEach((function(t){var n=e[t];Object.defineProperty(ot.prototype,t,{get:function(){var e,a,i=ge[this._id].options[t];return le(i)?(e=i,a=n.optionsConf.reduce((function(t,n){var a,i=n[0],o=n[1],s=n[2],r=n[3],l=null!=(n=n[4])?e[r][n]:r?e[r]:e[o];return t[o]="id"===i?l?Object.keys(s).some((function(e){return s[e]===l&&(a=e,!0)}))?a:new Error("It's broken"):j:null==l?j:we(l),t}),{}),n.anim&&(a.animation=we(e.animation)),a):i},set:st(t),enumerable:!0})})),["startLabel","endLabel","middleLabel"].forEach((function(e,t){Object.defineProperty(ot.prototype,e,{get:function(){var e=ge[this._id],n=e.options;return n.labelSEM[t]&&!e.optionIsAttach.labelSEM[t]?_e[n.labelSEM[t]._id].text:n.labelSEM[t]||""},set:st(e),enumerable:!0})})),ot.prototype.setOptions=function(e){return it(ge[this._id],e),this},ot.prototype.position=function(){return Je(ge[this._id],{position:!0}),this},ot.prototype.remove=function(){var t=ge[this._id],n=t.curStats;Object.keys(e).forEach((function(e){n[e+="_animId"]&&he.remove(n[e])})),n.show_animId&&he.remove(n.show_animId),t.attachments.slice().forEach((function(e){at(t,e)})),t.baseWindow&&t.svg&&t.baseWindow.document.body.removeChild(t.svg),delete ge[this._id]},ot.prototype.show=function(e,t){return tt(ge[this._id],!0,e,t),this},ot.prototype.hide=function(e,t){return tt(ge[this._id],!1,e,t),this},o=function(e){e&&_e[e._id]&&(e.boundTargets.slice().forEach((function(t){at(t.props,e,!0)})),e.conf.remove&&e.conf.remove(e),delete _e[e._id])},rt.prototype.remove=function(){var e=this,t=_e[e._id];t&&(t.boundTargets.slice().forEach((function(e){t.conf.removeOption(t,e)})),je((function(){var t=_e[e._id];t&&(console.error("LeaderLineAttachment was not removed by removeOption"),o(t))})))},a=rt,window.LeaderLineAttachment=a,i=function(e,t){return e instanceof a&&(!(e.isRemoved||t&&_e[e._id].conf.type!==t)||null)},n={pointAnchor:{type:"anchor",argOptions:[{optionName:"element",type:Me}],init:function(e,t){return e.element=n.pointAnchor.checkElement(t.element),e.x=n.pointAnchor.parsePercent(t.x,!0)||[.5,!0],e.y=n.pointAnchor.parsePercent(t.y,!0)||[.5,!0],!0},removeOption:function(e,t){var i=t.props,o={},s=e.element;s===(e=i.options.anchorSE["start"===t.optionName?1:0])&&(s=e===document.body?new a(n.pointAnchor,[s]):document.body),o[t.optionName]=s,it(i,o)},getBBoxNest:function(e,t){var n=Le(e.element,t.baseWindow),a=n.width;return t=n.height,n.width=n.height=0,n.left=n.right=n.left+e.x[0]*(e.x[1]?a:1),n.top=n.bottom=n.top+e.y[0]*(e.y[1]?t:1),n},parsePercent:function(e,t){var n,a,i=!1;return ue(e)?a=e:"string"==typeof e&&(n=ee.exec(e))&&n[2]&&(i=0!=(a=parseFloat(n[1])/100)),null!=a&&(t||0<=a)?[a,i]:null},checkElement:function(e){if(null==e)e=document.body;else if(!Me(e))throw new Error("`element` must be Element");return e}},areaAnchor:{type:"anchor",argOptions:[{optionName:"element",type:Me},{optionName:"shape",type:"string"}],stats:{color:{},strokeWidth:{},elementWidth:{},elementHeight:{},elementLeft:{},elementTop:{},pathListRel:{},bBoxRel:{},pathData:{},viewBoxBBox:{hasProps:!0},dashLen:{},dashGap:{}},init:function(e,t){var a,i=[];return e.element=n.pointAnchor.checkElement(t.element),"string"==typeof t.color&&(e.color=t.color.trim()),"string"==typeof t.fillColor&&(e.fill=t.fillColor.trim()),ue(t.size)&&0<=t.size&&(e.size=t.size),t.dash&&(e.dash=!0,ue(t.dash.len)&&0<t.dash.len&&(e.dashLen=t.dash.len),ue(t.dash.gap)&&0<t.dash.gap&&(e.dashGap=t.dash.gap)),"circle"===t.shape?e.shape=t.shape:"polygon"===t.shape&&Array.isArray(t.points)&&3<=t.points.length&&t.points.every((function(t){var a={};return!(!(a.x=n.pointAnchor.parsePercent(t[0],!0))||!(a.y=n.pointAnchor.parsePercent(t[1],!0))||(i.push(a),(a.x[1]||a.y[1])&&(e.hasRatio=!0),0))}))?(e.shape=t.shape,e.points=i):(e.shape="rect",e.radius=ue(t.radius)&&0<=t.radius?t.radius:0),"rect"!==e.shape&&"circle"!==e.shape||(e.x=n.pointAnchor.parsePercent(t.x,!0)||[-.05,!0],e.y=n.pointAnchor.parsePercent(t.y,!0)||[-.05,!0],e.width=n.pointAnchor.parsePercent(t.width)||[1.1,!0],e.height=n.pointAnchor.parsePercent(t.height)||[1.1,!0],(e.x[1]||e.y[1]||e.width[1]||e.height[1])&&(e.hasRatio=!0)),a=e.element.ownerDocument,e.svg=t=a.createElementNS(te,"svg"),t.className.baseVal=x+"-areaAnchor",t.viewBox.baseVal||t.setAttribute("viewBox","0 0 0 0"),e.path=t.appendChild(a.createElementNS(te,"path")),e.path.style.fill=e.fill||"none",e.isShown=!1,t.style.visibility="hidden",a.body.appendChild(t),$e(a=a.defaultView),e.bodyOffset=Xe(a),e.updateColor=function(){var t=e.curStats,n=e.aplStats,a=e.boundTargets.length?e.boundTargets[0].props.curStats:null;t.color=a=e.color||(a?a.line_color:re.lineColor),qe(e,n,"color",a)&&(e.path.style.stroke=a)},e.updateShow=function(){Ke(e,e.boundTargets.some((function(e){return!0===e.props.isShown})))},!0},bind:function(e,t){return t=t.props,e.color||Re(t,"cur_line_color",e.updateColor),Re(t,"svgShow",e.updateShow),je((function(){e.updateColor(),e.updateShow()})),!0},unbind:function(e,t){t=t.props,e.color||Fe(t,"cur_line_color",e.updateColor),Fe(t,"svgShow",e.updateShow),1<e.boundTargets.length&&je((function(){e.updateColor(),e.updateShow(),n.areaAnchor.update(e)&&e.boundTargets.forEach((function(e){Je(e.props,{position:!0})}))}))},removeOption:function(e,t){n.pointAnchor.removeOption(e,t)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach((function(t){n.areaAnchor.unbind(e,t)}))),e.svg.parentNode.removeChild(e.svg)},getStrokeWidth:function(e,t){return n.areaAnchor.update(e)&&1<e.boundTargets.length&&je((function(){e.boundTargets.forEach((function(e){e.props!==t&&Je(e.props,{position:!0})}))})),e.curStats.strokeWidth},getPathData:function(e,t){var n=Le(e.element,t.baseWindow);return We(e.curStats.pathListRel,(function(e){e.x+=n.left,e.y+=n.top}))},getBBoxNest:function(e,t){return t=Le(e.element,t.baseWindow),{left:(e=e.curStats.bBoxRel).left+t.left,top:e.top+t.top,right:e.right+t.left,bottom:e.bottom+t.top,width:e.width,height:e.height}},update:function(e){var t,n,a,i,o,s,r,l,u,h,p,d,c,f,y,m,g=e.curStats,S=e.aplStats,_=e.boundTargets.length?e.boundTargets[0].props.curStats:null,v={};if(v.strokeWidth=qe(e,g,"strokeWidth",null!=e.size?e.size:_?_.line_strokeWidth:re.lineSize),t=Ce(e.element),v.elementWidth=qe(e,g,"elementWidth",t.width),v.elementHeight=qe(e,g,"elementHeight",t.height),v.elementLeft=qe(e,g,"elementLeft",t.left),v.elementTop=qe(e,g,"elementTop",t.top),v.strokeWidth||e.hasRatio&&(v.elementWidth||v.elementHeight)){switch(e.shape){case"rect":(d={left:e.x[0]*(e.x[1]?t.width:1),top:e.y[0]*(e.y[1]?t.height:1),width:e.width[0]*(e.width[1]?t.width:1),height:e.height[0]*(e.height[1]?t.height:1)}).right=d.left+d.width,d.bottom=d.top+d.height,p=g.strokeWidth/2,l=(r=Math.min(d.width,d.height))?r/2*Math.SQRT2+p:0,h=(r=e.radius?e.radius<=l?e.radius:l:0)?(l=(r-p)/Math.SQRT2,h=[{x:d.left-(u=r-l),y:d.top+l},{x:d.left+l,y:d.top-u},{x:d.right-l,y:d.top-u},{x:d.right+u,y:d.top+l},{x:d.right+u,y:d.bottom-l},{x:d.right-l,y:d.bottom+u},{x:d.left+l,y:d.bottom+u},{x:d.left-u,y:d.bottom-l}],g.pathListRel=[[h[0],{x:h[0].x,y:h[0].y-(p=r*K)},{x:h[1].x-p,y:h[1].y},h[1]]],h[1].x!==h[2].x&&g.pathListRel.push([h[1],h[2]]),g.pathListRel.push([h[2],{x:h[2].x+p,y:h[2].y},{x:h[3].x,y:h[3].y-p},h[3]]),h[3].y!==h[4].y&&g.pathListRel.push([h[3],h[4]]),g.pathListRel.push([h[4],{x:h[4].x,y:h[4].y+p},{x:h[5].x+p,y:h[5].y},h[5]]),h[5].x!==h[6].x&&g.pathListRel.push([h[5],h[6]]),g.pathListRel.push([h[6],{x:h[6].x-p,y:h[6].y},{x:h[7].x,y:h[7].y+p},h[7]]),h[7].y!==h[0].y&&g.pathListRel.push([h[7],h[0]]),g.pathListRel.push([]),u=r-l+g.strokeWidth/2,[{x:d.left-u,y:d.top-u},{x:d.right+u,y:d.bottom+u}]):(u=g.strokeWidth/2,h=[{x:d.left-u,y:d.top-u},{x:d.right+u,y:d.bottom+u}],g.pathListRel=[[h[0],{x:h[1].x,y:h[0].y}],[{x:h[1].x,y:h[0].y},h[1]],[h[1],{x:h[0].x,y:h[1].y}],[]],[{x:d.left-g.strokeWidth,y:d.top-g.strokeWidth},{x:d.right+g.strokeWidth,y:d.bottom+g.strokeWidth}]),g.bBoxRel={left:h[0].x,top:h[0].y,right:h[1].x,bottom:h[1].y,width:h[1].x-h[0].x,height:h[1].y-h[0].y};break;case"circle":(s={left:e.x[0]*(e.x[1]?t.width:1),top:e.y[0]*(e.y[1]?t.height:1),width:e.width[0]*(e.width[1]?t.width:1),height:e.height[0]*(e.height[1]?t.height:1)}).width||s.height||(s.width=s.height=10),s.width||(s.width=s.height),s.height||(s.height=s.width),s.right=s.left+s.width,s.bottom=s.top+s.height,p=s.left+s.width/2,r=s.top+s.height/2,o=g.strokeWidth/2,l=s.width/2,u=s.height/2,d=l*Math.SQRT2+o,h=u*Math.SQRT2+o,g.pathListRel=[[(o=[{x:p-d,y:r},{x:p,y:r-h},{x:p+d,y:r},{x:p,y:r+h}])[0],{x:o[0].x,y:o[0].y-(p=h*K)},{x:o[1].x-(r=d*K),y:o[1].y},o[1]],[o[1],{x:o[1].x+r,y:o[1].y},{x:o[2].x,y:o[2].y-p},o[2]],[o[2],{x:o[2].x,y:o[2].y+p},{x:o[3].x+r,y:o[3].y},o[3]],[o[3],{x:o[3].x-r,y:o[3].y},{x:o[0].x,y:o[0].y+p},o[0]],[]],l=d-l+g.strokeWidth/2,u=h-u+g.strokeWidth/2,o=[{x:s.left-l,y:s.top-u},{x:s.right+l,y:s.bottom+u}],g.bBoxRel={left:o[0].x,top:o[0].y,right:o[1].x,bottom:o[1].y,width:o[1].x-o[0].x,height:o[1].y-o[0].y};break;case"polygon":e.points.forEach((function(e){var n=e.x[0]*(e.x[1]?t.width:1);e=e.y[0]*(e.y[1]?t.height:1),a?(n<a.left&&(a.left=n),n>a.right&&(a.right=n),e<a.top&&(a.top=e),e>a.bottom&&(a.bottom=e)):a={left:n,right:n,top:e,bottom:e},i?g.pathListRel.push([i,{x:n,y:e}]):g.pathListRel=[],i={x:n,y:e}})),g.pathListRel.push([]),o=g.strokeWidth/2,o=[{x:a.left-o,y:a.top-o},{x:a.right+o,y:a.bottom+o}],g.bBoxRel={left:o[0].x,top:o[0].y,right:o[1].x,bottom:o[1].y,width:o[1].x-o[0].x,height:o[1].y-o[0].y}}v.pathListRel=v.bBoxRel=!0}return(v.pathListRel||v.elementLeft||v.elementTop)&&(g.pathData=We(g.pathListRel,(function(e){e.x+=t.left,e.y+=t.top}))),qe(e,S,"strokeWidth",n=g.strokeWidth)&&(e.path.style.strokeWidth=n+"px"),De(n=g.pathData,S.pathData)&&(e.path.setPathData(n),S.pathData=n,v.pathData=!0),e.dash&&(!v.pathData&&(!v.strokeWidth||e.dashLen&&e.dashGap)||(g.dashLen=e.dashLen||2*g.strokeWidth,g.dashGap=e.dashGap||g.strokeWidth),v.dash=qe(e,S,"dashLen",g.dashLen)||v.dash,v.dash=qe(e,S,"dashGap",g.dashGap)||v.dash,v.dash&&(e.path.style.strokeDasharray=S.dashLen+","+S.dashGap)),c=g.viewBoxBBox,f=S.viewBoxBBox,y=e.svg.viewBox.baseVal,m=e.svg.style,c.x=g.bBoxRel.left+t.left,c.y=g.bBoxRel.top+t.top,c.width=g.bBoxRel.width,c.height=g.bBoxRel.height,["x","y","width","height"].forEach((function(t){(n=c[t])!==f[t]&&(y[t]=f[t]=n,m[z[t]]=n+("x"===t||"y"===t?e.bodyOffset[t]:0)+"px")})),v.strokeWidth||v.pathListRel||v.bBoxRel}},mouseHoverAnchor:{type:"anchor",argOptions:[{optionName:"element",type:Me},{optionName:"showEffectName",type:"string"}],style:{backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cG9seWdvbiBwb2ludHM9IjI0LDAgMCw4IDgsMTEgMCwxOSA1LDI0IDEzLDE2IDE2LDI0IiBmaWxsPSJjb3JhbCIvPjwvc3ZnPg==')",backgroundSize:"",backgroundRepeat:"no-repeat",backgroundColor:"#f8f881",cursor:"default"},hoverStyle:{backgroundImage:"none",backgroundColor:"#fadf8f"},padding:{top:1,right:15,bottom:1,left:2},minHeight:15,backgroundPosition:{right:2,top:2},backgroundSize:{width:12,height:12},dirKeys:[["top","Top"],["right","Right"],["bottom","Bottom"],["left","Left"]],init:function(e,a){var i,o,s,r,l,u,h,p,d,c=n.mouseHoverAnchor,f={};if(e.element=n.pointAnchor.checkElement(a.element),!((p=(h=e.element).ownerDocument)&&(d=p.defaultView)&&d.HTMLElement&&h instanceof d.HTMLElement))throw new Error("`element` must be HTML element");return c.style.backgroundSize=c.backgroundSize.width+"px "+c.backgroundSize.height+"px",["style","hoverStyle"].forEach((function(t){var n=c[t];e[t]=Object.keys(n).reduce((function(e,t){return e[t]=n[t],e}),{})})),"inline"===(i=e.element.ownerDocument.defaultView.getComputedStyle(e.element,"")).display?e.style.display="inline-block":"none"===i.display&&(e.style.display="block"),n.mouseHoverAnchor.dirKeys.forEach((function(t){var n=t[0];t="padding"+t[1],parseFloat(i[t])<c.padding[n]&&(e.style[t]=c.padding[n]+"px")})),e.style.display&&(s=e.element.style.display,e.element.style.display=e.style.display),n.mouseHoverAnchor.dirKeys.forEach((function(t){t="padding"+t[1],e.style[t]&&(f[t]=e.element.style[t],e.element.style[t]=e.style[t])})),(h=e.element.getBoundingClientRect()).height<c.minHeight&&(ne?(d=c.minHeight,"content-box"===i.boxSizing?d-=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)+parseFloat(i.paddingTop)+parseFloat(i.paddingBottom):"padding-box"===i.boxSizing&&(d-=parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth)),e.style.height=d+"px"):e.style.height=parseFloat(i.height)+(c.minHeight-h.height)+"px"),e.style.backgroundPosition=oe?h.width-c.backgroundSize.width-c.backgroundPosition.right+"px "+c.backgroundPosition.top+"px":"right "+c.backgroundPosition.right+"px top "+c.backgroundPosition.top+"px",e.style.display&&(e.element.style.display=s),n.mouseHoverAnchor.dirKeys.forEach((function(t){t="padding"+t[1],e.style[t]&&(e.element.style[t]=f[t])})),["style","hoverStyle"].forEach((function(t){var n=e[t],i=a[t];le(i)&&Object.keys(i).forEach((function(e){"string"==typeof i[e]||ue(i[e])?n[e]=i[e]:null==i[e]&&delete n[e]}))})),"function"==typeof a.onSwitch&&(u=a.onSwitch),a.showEffectName&&t[a.showEffectName]&&(e.showEffectName=r=a.showEffectName),l=a.animOptions,e.elmStyle=o=e.element.style,e.mouseenter=function(t){e.hoverStyleSave=c.getStyles(o,Object.keys(e.hoverStyle)),c.setStyles(o,e.hoverStyle),e.boundTargets.forEach((function(e){tt(e.props,!0,r,l)})),u&&u(t)},e.mouseleave=function(t){c.setStyles(o,e.hoverStyleSave),e.boundTargets.forEach((function(e){tt(e.props,!1,r,l)})),u&&u(t)},!0},bind:function(e,t){var a,i,o,s,r;return t.props.svg?n.mouseHoverAnchor.llShow(t.props,!1,e.showEffectName):je((function(){n.mouseHoverAnchor.llShow(t.props,!1,e.showEffectName)})),e.enabled||(e.styleSave=n.mouseHoverAnchor.getStyles(e.elmStyle,Object.keys(e.style)),n.mouseHoverAnchor.setStyles(e.elmStyle,e.style),e.removeEventListener=(a=e.element,i=e.mouseenter,o=e.mouseleave,"onmouseenter"in a&&"onmouseleave"in a?(a.addEventListener("mouseenter",i,!1),a.addEventListener("mouseleave",o,!1),function(){a.removeEventListener("mouseenter",i,!1),a.removeEventListener("mouseleave",o,!1)}):(console.warn("mouseenter and mouseleave events polyfill is enabled."),a.addEventListener("mouseover",s=function(e){e.relatedTarget&&(e.relatedTarget===this||this.compareDocumentPosition(e.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||i.apply(this,arguments)}),a.addEventListener("mouseout",r=function(e){e.relatedTarget&&(e.relatedTarget===this||this.compareDocumentPosition(e.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||o.apply(this,arguments)}),function(){a.removeEventListener("mouseover",s,!1),a.removeEventListener("mouseout",r,!1)})),e.enabled=!0),!0},unbind:function(e,t){e.enabled&&e.boundTargets.length<=1&&(e.removeEventListener(),n.mouseHoverAnchor.setStyles(e.elmStyle,e.styleSave),e.enabled=!1),n.mouseHoverAnchor.llShow(t.props,!0,e.showEffectName)},removeOption:function(e,t){n.pointAnchor.removeOption(e,t)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach((function(t){n.mouseHoverAnchor.unbind(e,t)})))},getBBoxNest:function(e,t){return Le(e.element,t.baseWindow)},llShow:function(e,n,a){t[a||e.curStats.show_effect].stop(e,!0,n),e.aplStats.show_on=n},getStyles:function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},setStyles:function(e,t){Object.keys(t).forEach((function(n){e[n]=t[n]}))}},captionLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},x:{},y:{}},textStyleProps:["fontFamily","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","kerning","letterSpacing","wordSpacing","textDecoration"],init:function(e,t){return"string"==typeof t.text&&(e.text=t.text.trim()),!!e.text&&("string"==typeof t.color&&(e.color=t.color.trim()),e.outlineColor="string"==typeof t.outlineColor?t.outlineColor.trim():"#fff",Array.isArray(t.offset)&&ue(t.offset[0])&&ue(t.offset[1])&&(e.offset={x:t.offset[0],y:t.offset[1]}),ue(t.lineOffset)&&(e.lineOffset=t.lineOffset),n.captionLabel.textStyleProps.forEach((function(n){null!=t[n]&&(e[n]=t[n])})),e.updateColor=function(t){n.captionLabel.updateColor(e,t)},e.updateSocketXY=function(t){var n,a=e.curStats,i=e.aplStats,o=t.curStats,s=o.position_socketXYSE[e.socketIndex];null!=s.x&&(e.offset?(a.x=s.x+e.offset.x,a.y=s.y+e.offset.y):(n=e.height/2,t=Math.max(o.attach_plugSideLenSE[e.socketIndex]||0,o.line_strokeWidth/2),o=o.position_socketXYSE[e.socketIndex?0:1],s.socketId===M||s.socketId===w?(a.x=s.socketId===M?s.x-n-e.width:s.x+n,a.y=o.y<s.y?s.y+t+n:s.y-t-n-e.height):(a.x=o.x<s.x?s.x+t+n:s.x-t-n-e.width,a.y=s.socketId===k?s.y-n-e.height:s.y+n)),qe(e,i,"x",n=a.x)&&(e.elmPosition.x.baseVal.getItem(0).value=n),qe(e,i,"y",n=a.y)&&(e.elmPosition.y.baseVal.getItem(0).value=n+e.height))},e.updatePath=function(t){var a=e.curStats,i=e.aplStats;(t=t.pathList.animVal||t.pathList.baseVal)&&(t=n.captionLabel.getMidPoint(t,e.lineOffset),a.x=t.x-e.width/2,a.y=t.y-e.height/2,qe(e,i,"x",t=a.x)&&(e.elmPosition.x.baseVal.getItem(0).value=t),qe(e,i,"y",t=a.y)&&(e.elmPosition.y.baseVal.getItem(0).value=t+e.height))},e.updateShow=function(t){n.captionLabel.updateShow(e,t)},oe&&(e.adjustEdge=function(t,a){var i=e.curStats;null!=i.x&&n.captionLabel.adjustEdge(a,{x:i.x,y:i.y,width:e.width,height:e.height},e.strokeWidth/2)}),!0)},updateColor:function(e,t){var n=e.curStats,a=e.aplStats;t=t.curStats,n.color=t=e.color||t.line_color,qe(e,a,"color",t)&&(e.styleFill.fill=t)},updateShow:function(e,t){(t=!0===t.isShown)!==e.isShown&&(e.styleShow.visibility=t?"":"hidden",e.isShown=t)},adjustEdge:function(e,t,n){(n={x1:t.x-n,y1:t.y-n,x2:t.x+t.width+n,y2:t.y+t.height+n}).x1<e.x1&&(e.x1=n.x1),n.y1<e.y1&&(e.y1=n.y1),n.x2>e.x2&&(e.x2=n.x2),n.y2>e.y2&&(e.y2=n.y2)},newText:function(e,t,n,a,i){var o,s,r=t.createElementNS(te,"text");return r.textContent=e,[r.x,r.y].forEach((function(e){var t=n.createSVGLength();t.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),e.baseVal.initialize(t)})),"boolean"!=typeof l&&(l="paintOrder"in r.style),i&&!l?(o=t.createElementNS(te,"defs"),r.id=a,o.appendChild(r),(s=(e=t.createElementNS(te,"g")).appendChild(t.createElementNS(te,"use"))).href.baseVal="#"+a,(t=e.appendChild(t.createElementNS(te,"use"))).href.baseVal="#"+a,(s=s.style).strokeLinejoin="round",{elmPosition:r,styleText:r.style,styleFill:t.style,styleStroke:s,styleShow:e.style,elmsAppend:[o,e]}):(s=r.style,i&&(s.strokeLinejoin="round",s.paintOrder="stroke"),{elmPosition:r,styleText:s,styleFill:s,styleStroke:i?s:null,styleShow:s,elmsAppend:[r]})},getMidPoint:function(e,t){var n,a,i,o=(i=Ge(e)).segsLen,s=-1,r=(i=i.lenAll)/2+(t||0);if(r<=0)return 2===(n=e[0]).length?Ve(n[0],n[1],0):Ne(n[0],n[1],n[2],n[3],0);if(i<=r)return 2===(n=e[e.length-1]).length?Ve(n[0],n[1],1):Ne(n[0],n[1],n[2],n[3],1);for(a=[];r>o[++s];)a.push(e[s]),r-=o[s];return 2===(n=e[s]).length?Ve(n[0],n[1],r/o[s]):Ne(n[0],n[1],n[2],n[3],Be(n[0],n[1],n[2],n[3],r))},initSvg:function(e,t){var a,i,o=n.captionLabel.newText(e.text,t.baseWindow.document,t.svg,x+"-captionLabel-"+e._id,e.outlineColor);["elmPosition","styleFill","styleShow","elmsAppend"].forEach((function(t){e[t]=o[t]})),e.isShown=!1,e.styleShow.visibility="hidden",n.captionLabel.textStyleProps.forEach((function(t){null!=e[t]&&(o.styleText[t]=e[t])})),o.elmsAppend.forEach((function(e){t.svg.appendChild(e)})),a=o.elmPosition.getBBox(),e.width=a.width,e.height=a.height,e.outlineColor&&(i=a.height/9,o.styleStroke.strokeWidth=(i=10<i?10:i<2?2:i)+"px",o.styleStroke.stroke=e.outlineColor),e.strokeWidth=i||0,Ze(e.aplStats,n.captionLabel.stats),e.updateColor(t),e.refSocketXY?e.updateSocketXY(t):e.updatePath(t),oe&&Je(t,{}),e.updateShow(t)},bind:function(e,t){var a=t.props;return e.color||Re(a,"cur_line_color",e.updateColor),(e.refSocketXY="startLabel"===t.optionName||"endLabel"===t.optionName)?(e.socketIndex="startLabel"===t.optionName?0:1,Re(a,"apl_position",e.updateSocketXY),e.offset||(Re(a,"cur_attach_plugSideLenSE",e.updateSocketXY),Re(a,"cur_line_strokeWidth",e.updateSocketXY))):Re(a,"apl_path",e.updatePath),Re(a,"svgShow",e.updateShow),oe&&Re(a,"new_edge4viewBox",e.adjustEdge),n.captionLabel.initSvg(e,a),!0},unbind:function(e,t){var a=t.props;e.elmsAppend&&(e.elmsAppend.forEach((function(e){a.svg.removeChild(e)})),e.elmPosition=e.styleFill=e.styleShow=e.elmsAppend=null),Ze(e.curStats,n.captionLabel.stats),Ze(e.aplStats,n.captionLabel.stats),e.color||Fe(a,"cur_line_color",e.updateColor),e.refSocketXY?(Fe(a,"apl_position",e.updateSocketXY),e.offset||(Fe(a,"cur_attach_plugSideLenSE",e.updateSocketXY),Fe(a,"cur_line_strokeWidth",e.updateSocketXY))):Fe(a,"apl_path",e.updatePath),Fe(a,"svgShow",e.updateShow),oe&&(Fe(a,"new_edge4viewBox",e.adjustEdge),Je(a,{}))},removeOption:function(e,t){var n=t.props,a={};a[t.optionName]="",it(n,a)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach((function(t){n.captionLabel.unbind(e,t)})))}},pathLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},startOffset:{},pathData:{}},init:function(e,t){return"string"==typeof t.text&&(e.text=t.text.trim()),!!e.text&&("string"==typeof t.color&&(e.color=t.color.trim()),e.outlineColor="string"==typeof t.outlineColor?t.outlineColor.trim():"#fff",ue(t.lineOffset)&&(e.lineOffset=t.lineOffset),n.captionLabel.textStyleProps.forEach((function(n){null!=t[n]&&(e[n]=t[n])})),e.updateColor=function(t){n.captionLabel.updateColor(e,t)},e.updatePath=function(t){var a=e.curStats,i=e.aplStats,o=t.curStats,s=t.pathList.animVal||t.pathList.baseVal;s&&(a.pathData=o=n.pathLabel.getOffsetPathData(s,o.line_strokeWidth/2+e.strokeWidth/2+e.height/4,1.25*e.height),De(o,i.pathData)&&(e.elmPath.setPathData(o),i.pathData=o,e.bBox=e.elmPosition.getBBox(),e.updateStartOffset(t)))},e.updateStartOffset=function(t){var n,a,i=e.curStats,o=e.aplStats,s=t.curStats;i.pathData&&(2===e.semIndex&&!e.lineOffset||(a=i.pathData.reduce((function(e,t){var a,i=t.values;switch(t.type){case"M":n={x:i[0],y:i[1]};break;case"L":a={x:i[0],y:i[1]},n&&(e+=Ae(n,a)),n=a;break;case"C":a={x:i[4],y:i[5]},n&&(e+=Te(n,{x:i[0],y:i[1]},{x:i[2],y:i[3]},a)),n=a}return e}),0),t=0===e.semIndex?0:1===e.semIndex?a:a/2,2!==e.semIndex&&(s=Math.max(s.attach_plugBackLenSE[e.semIndex]||0,s.line_strokeWidth/2)+e.strokeWidth/2+e.height/4,t=(t+=0===e.semIndex?s:-s)<0?0:a<t?a:t),e.lineOffset&&(t=(t+=e.lineOffset)<0?0:a<t?a:t),i.startOffset=t,qe(e,o,"startOffset",t)&&(e.elmOffset.startOffset.baseVal.value=t)))},e.updateShow=function(t){n.captionLabel.updateShow(e,t)},oe&&(e.adjustEdge=function(t,a){e.bBox&&n.captionLabel.adjustEdge(a,e.bBox,e.strokeWidth/2)}),!0)},getOffsetPathData:function(e,t,n){var a,i,o=[];function s(e,t){return Math.abs(e.x-t.x)<3&&Math.abs(e.y-t.y)<3}return e.forEach((function(e){var n,i,r,l,u,h,p,d,c,f,y;2===e.length?(d=e[0],c=e[1],f=t,y=Math.atan2(d.y-c.y,c.x-d.x)+.5*Math.PI,n=[{x:d.x+Math.cos(y)*f,y:d.y+Math.sin(y)*f*-1},{x:c.x+Math.cos(y)*f,y:c.y+Math.sin(y)*f*-1}],a?(r=a.points,0<=(p=Math.atan2(r[1].y-r[0].y,r[0].x-r[1].x)-Math.atan2(e[0].y-e[1].y,e[1].x-e[0].x))&&p<=Math.PI?i={type:"line",points:n,inside:!0}:(u=Pe(r[0],r[1],t),l=Pe(n[1],n[0],t),h=r[0],d=n[1],y=(c=u).x-h.x,f=c.y-h.y,p=d.x-l.x,c=d.y-l.y,d=(-f*(h.x-l.x)+y*(h.y-l.y))/(-p*f+y*c),c=(p*(h.y-l.y)-c*(h.x-l.x))/(-p*f+y*c),i=(f=0<=d&&d<=1&&0<=c&&c<=1?{x:h.x+c*y,y:h.y+c*f}:null)?{type:"line",points:[r[1]=f,n[1]]}:(r[1]=s(l,u)?l:u,{type:"line",points:[l,n[1]]}),a.len=Ae(r[0],r[1]))):i={type:"line",points:n},i.len=Ae(i.points[0],i.points[1]),o.push(a=i)):(o.push({type:"cubic",points:function(e,t,n,a,i,o){for(var s,r,l=Te(e,t,n,a)/16,u=1/(16<i?i/16*l:l),h=[],p=0;r=(90-(s=Ne(e,t,n,a,p)).angle)*(Math.PI/180),h.push({x:s.x+Math.cos(r)*i,y:s.y+Math.sin(r)*i*-1}),!(1<=p);)1<(p+=u)&&(p=1);return h}(e[0],e[1],e[2],e[3],t)}),a=null)})),a=null,o.forEach((function(e){var i;a="line"===e.type?(e.inside&&(a.len>t?((i=a.points)[1]=Pe(i[0],i[1],-t),a.len=Ae(i[0],i[1])):(a.points=null,a.len=0),e.len>t+n?((i=e.points)[0]=Pe(i[1],i[0],-(t+n)),e.len=Ae(i[0],i[1])):(e.points=null,e.len=0)),e):null})),o.reduce((function(e,t){var n=t.points;return n&&(i&&s(n[0],i)||e.push({type:"M",values:[n[0].x,n[0].y]}),"line"===t.type?e.push({type:"L",values:[n[1].x,n[1].y]}):(n.shift(),n.forEach((function(t){e.push({type:"L",values:[t.x,t.y]})}))),i=n[n.length-1]),e}),[])},newText:function(e,t,n,a){var i,o,s,r,u=t.createElementNS(te,"defs"),h=u.appendChild(t.createElementNS(te,"path"));return h.id=i=n+"-path",(s=(o=t.createElementNS(te,"text")).appendChild(t.createElementNS(te,"textPath"))).href.baseVal="#"+i,s.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),s.textContent=e,"boolean"!=typeof l&&(l="paintOrder"in o.style),a&&!l?(o.id=e=n+"-text",u.appendChild(o),(r=(n=t.createElementNS(te,"g")).appendChild(t.createElementNS(te,"use"))).href.baseVal="#"+e,(t=n.appendChild(t.createElementNS(te,"use"))).href.baseVal="#"+e,(r=r.style).strokeLinejoin="round",{elmPosition:o,elmPath:h,elmOffset:s,styleText:o.style,styleFill:t.style,styleStroke:r,styleShow:n.style,elmsAppend:[u,n]}):(r=o.style,a&&(r.strokeLinejoin="round",r.paintOrder="stroke"),{elmPosition:o,elmPath:h,elmOffset:s,styleText:r,styleFill:r,styleStroke:a?r:null,styleShow:r,elmsAppend:[u,o]})},initSvg:function(e,t){var a,i,o,s=n.pathLabel.newText(e.text,t.baseWindow.document,x+"-pathLabel-"+e._id,e.outlineColor);["elmPosition","elmPath","elmOffset","styleFill","styleShow","elmsAppend"].forEach((function(t){e[t]=s[t]})),e.isShown=!1,e.styleShow.visibility="hidden",n.captionLabel.textStyleProps.forEach((function(t){null!=e[t]&&(s.styleText[t]=e[t])})),s.elmsAppend.forEach((function(e){t.svg.appendChild(e)})),s.elmPath.setPathData([{type:"M",values:[0,100]},{type:"h",values:[100]}]),ie&&(o=s.elmOffset.href.baseVal,s.elmOffset.href.baseVal=""),a=s.elmPosition.getBBox(),ie&&(s.elmOffset.href.baseVal=o),s.styleText.textAnchor=["start","end","middle"][e.semIndex],2!==e.semIndex||e.lineOffset||s.elmOffset.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,50),e.height=a.height,e.outlineColor&&(i=a.height/9,s.styleStroke.strokeWidth=(i=10<i?10:i<2?2:i)+"px",s.styleStroke.stroke=e.outlineColor),e.strokeWidth=i||0,Ze(e.aplStats,n.pathLabel.stats),e.updateColor(t),e.updatePath(t),e.updateStartOffset(t),oe&&Je(t,{}),e.updateShow(t)},bind:function(e,t){var a=t.props;return e.color||Re(a,"cur_line_color",e.updateColor),Re(a,"cur_line_strokeWidth",e.updatePath),Re(a,"apl_path",e.updatePath),e.semIndex="startLabel"===t.optionName?0:"endLabel"===t.optionName?1:2,2===e.semIndex&&!e.lineOffset||Re(a,"cur_attach_plugBackLenSE",e.updateStartOffset),Re(a,"svgShow",e.updateShow),oe&&Re(a,"new_edge4viewBox",e.adjustEdge),n.pathLabel.initSvg(e,a),!0},unbind:function(e,t){var a=t.props;e.elmsAppend&&(e.elmsAppend.forEach((function(e){a.svg.removeChild(e)})),e.elmPosition=e.elmPath=e.elmOffset=e.styleFill=e.styleShow=e.elmsAppend=null),Ze(e.curStats,n.pathLabel.stats),Ze(e.aplStats,n.pathLabel.stats),e.color||Fe(a,"cur_line_color",e.updateColor),Fe(a,"cur_line_strokeWidth",e.updatePath),Fe(a,"apl_path",e.updatePath),2===e.semIndex&&!e.lineOffset||Fe(a,"cur_attach_plugBackLenSE",e.updateStartOffset),Fe(a,"svgShow",e.updateShow),oe&&(Fe(a,"new_edge4viewBox",e.adjustEdge),Je(a,{}))},removeOption:function(e,t){var n=t.props,a={};a[t.optionName]="",it(n,a)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach((function(t){n.pathLabel.unbind(e,t)})))}}},Object.keys(n).forEach((function(e){ot[e]=function(){return new a(n[e],Array.prototype.slice.call(arguments))}})),ot.positionByWindowResize=!0,window.addEventListener("resize",de.add((function(){ot.positionByWindowResize&&Object.keys(ge).forEach((function(e){Je(ge[e],{position:!0})}))})),!1),ot}();class o{static fromJSON(e){return new o(e.id,e.template,e.x,e.y,e.data,e.parents,e.children,e.group)}constructor(e,t,n,a,i,o={},s={},r={name:null,collapsed:!1,ends:[]}){this.id=e,this.template=t,this.x=n,this.y=a,this.data=i,this.parents=o,this.children=s,this.group=r}isLeaf(){return!Object.values(this.children)?.length}isHead(){return!Object.values(this.parents)?.length}isGroup(e=null){return!(!this.group.ends.length&&!this.group.name||null!==e&&this.group.collapsed!==e)}groupAllChildren(e){this.group.ends=this.getLeaves(e)}parentGroupNodes(e,t=[]){if(t.includes(this.id))return[];t.push(this.id);let n=[];for(const[a,i]of Object.entries(this.parents))for(const a of i){const i=e[a];i.isGroup()&&n.push(i.id),n=n.concat(i.parentGroupNodes(e,t))}return n}hasChild(e,t,n=null){if(this.id===t)return!0;if(this.id===n)return!1;for(const[a,i]of Object.entries(this.children))for(const a of i)if(e[a].hasChild(e,t,n))return!0;return!1}moveConnection(e,t,n,a){e[n].splice(e[n].indexOf(t),1),e[a]||(e[a]=[]),e[a].push(t)}moveParent(e,t,n){this.moveConnection(this.parents,e,t,n)}moveChild(e,t,n){this.moveConnection(this.children,e,t,n)}isDirectChild(e,t){return!!this.children[t]?.includes(e)}groupContains(e,t){for(const n of this.group.ends)if(this.hasChild(e,t,n))return!0;return!1}getInvolvedGroupNodes(e){const t=this.parentGroupNodes(e),n=[];for(const a of t){const t=e[a];t.groupContains(e,this.id)&&n.push(t)}return n}isVisible(e){const t=this.getInvolvedGroupNodes(e);for(const n of t)if(this.id!=n.id&&n.group.collapsed&&n.groupContains(e,this.id))return!1;return!0}getLeaves(e,t=[]){if(t.includes(this.id))return[];if(t.push(this.id),this.isLeaf())return[this.id];let n=[];for(const[a,i]of Object.entries(this.children))for(const a of i){const i=e[a];n=n.concat(i.getLeaves(e,t))}return n}distanceTo(e){return Math.sqrt((this.x-e.x)**2+(this.y-e.y)**2)}}class s{static TYPES={Node:0,Connection:1};constructor(e,t,n=null){const a=document.getElementById("nodel");switch(this.elem=t.target,this.x=t.x-a.offsetWidth/2,this.y=t.y-a.offsetHeight/2,e){case s.TYPES.Node:this.node=n;break;case s.TYPES.Connection:this.nodes=n;break;default:console.error(`Unknown NodelEvent type: ${e}`)}}}const r={Renderer:class{constructor(){this.recenter(),this.resetScale(),this.templates=function(){const e=document.getElementById("nodel").children,t=[];for(let n=0;n<e.length;n++){const a=e[n];t.push(a.id)}return t}(),this.hideTemplates=!1,this.toggleTemplates(),this.connectionBinding={},this.connectionColorCallback=()=>"#ad00d9",this.connectionLabelCallback=()=>"",this.helpers={"connection-color":()=>"#ad00d9","connection-label":()=>""},this.lines=[]}toggleTemplates(){this.hideTemplates=!this.hideTemplates;for(const e of this.templates)document.getElementById(e).hidden=this.hideTemplates}clear(){const e=document.getElementById("nodel");this.disconnectAll();for(let t=e.children.length-1;t>=0;t--){const n=e.children[t];this.templates.includes(n.id)||e.removeChild(n)}}on(e,t){this.helpers[e]=t}draw(e){const t=document.getElementById("nodel");this.clear();const n=Object.values(e).filter((t=>t.isVisible(e)));console.debug("Visible nodes",n);for(const e of n){const n=document.getElementById(e.template).cloneNode(!0);t.appendChild(n),n.id=e.id,n.hidden=!1,e.isGroup(!0)&&n.classList.add("group");let i=e.group.collapsed?e.group:e.data;for(let[e,t]of Object.entries(i))n.innerHTML=n.innerHTML.replaceAll(`{${e}}`,t);const[o,s]=a(e);n.style.position="absolute",n.style.left=o-n.offsetWidth/2+"px",n.style.top=s-n.offsetHeight/2+"px"}for(const t of n){const a=t.group.collapsed?t.group.ends:[t.id];for(const i of a){const a=e[i];for(const[i,o]of Object.entries(a.children))for(const a of o){const o=e[a];let s=t,r=null,l=!1;if(n.includes(o))r=o;else{const t=o.getInvolvedGroupNodes(e).reverse().find((e=>e.group.collapsed));r=t,l=!0}const u=this.drawConnection(s,r,i,l),h=this.connectionBinding;if(h.eventType&&h.callback){const e=Array.from(document.querySelector(`path#leader-line-${u._id}-line-path`).closest("svg.leader-line").querySelectorAll("text")).find((e=>e.textContent===u.middleLabel));e.classList.add("connection"),e.addEventListener(h.eventType,(e=>{h.callback(e,[s.id,r.id])}))}}}}}drawConnection(e,t,n,a=!1){const[o,s]=[e.id,t.id];console.debug(`Drawing from ${o} to ${s}`);const r=document.getElementById(o),l=document.getElementById(s),u=this.helpers["connection-color"](n),h=this.helpers["connection-label"](e,t,n),p=new i(r,l,{middleLabel:h,dash:a,color:u});return this.lines.push(p),p}disconnectAll(){for(const e of this.lines)e.remove();this.lines=[]}addConnectionBinding(e,t){this.connectionBinding={eventType:e,callback:t}}verify(e,t=!0){return!(!e||this.templates.includes(e)!=t)||(console.error(`(nodel) ${t?"couldn't find":"found"} template #${e}`),!1)}recenter(){self.x=0,self.y=0}panView(e,t){self.x+=e,self.y+=t}adjustScale(e){this.scale+=e}setScale(e){this.scale=e}resetScale(){this.scale=1}},Manager:class{constructor(e){this.nodes={},this.render=e,this.isDrawingPaused=0,this.onDrawCallbacks=[]}isEmpty(){return!Object.keys(this.nodes).length}exists(e){return e&&e in this.nodes}verify(e,t=!0){return this.exists(e)===t||(console.debug(`(nodel) ${t?"couldn't find":"found"} #${e}`),!1)}verifyBoth(e,t,n=!0){return this.verify(e)&&this.verify(t)}onDraw(e){this.onDrawCallbacks.push(e)}redraw(){if(this.isDrawingPaused)console.warn("skipping draw request, drawing is paused");else{this.render.draw(this.nodes);for(const e of this.onDrawCallbacks)e()}}pauseDraw(){this.isDrawingPaused+=1,console.debug(`Drawing paused: ${this.isDrawingPaused}`)}unpauseDraw(){console.debug(`Drawing unpaused: ${this.isDrawingPaused}`),this.isDrawingPaused-=1,this.isDrawingPaused<0&&console.error("Something has gone terribly wrong"),this.redraw()}addNode(e,t,n,a){if(this.render.verify(e)){const i=`node-${String(Math.random().toString(16).slice(2))}`;return this.nodes[i]=new o(i,e,t,n,a),this.redraw(),i}return null}createGroup(e,t){if(this.verify(e)){const n=this.nodes[e];n.group.name=t,n.groupAllChildren(this.nodes),this.redraw()}}toggleGroup(e,t=null){if(this.verify(e)){const n=this.nodes[e];n.group.ends.length||this.createGroup(e,`${n.data.name} group`),n.group.collapsed=null==t?!n.group.collapsed:t,this.redraw()}}deleteNode(e){if(this.verify(e)){const t=this.nodes[e];delete this.nodes[e],this.eachChild(t,(e=>{for(const[n,a]of Object.entries(e.parents))t.id in a&&e.parents[n].splice(a.indexOf(t.id),1)})),this.eachParent(parent,(e=>{for(const[e,n]of Object.entries(parent.children))t.id in n&&parent.children[e].splice(n.indexOf(t.id),1)})),this.redraw()}}toggleConnect(e,t,n="default"){if(!this.verifyBoth(e,t))return;const a=this.nodes[e];if(a.group.collapsed)for(const e of a.group.ends)return void this.toggleConnect(e,t,n);a.isDirectChild(t,n)?this.disconnectNodes(e,t,n):this.connectNodes(e,t,n),this.redraw()}getConnectionType(e,t){if(!this.verifyBoth(e,t))return;const n=this.nodes[e];for(const[e,a]of Object.entries(n.children))if(a.includes(t))return e;return null}setConnectionType(e,t,n){if(!this.verifyBoth(e,t))return;const a=this.getConnectionType(e,t);this.nodes[e].moveChild(t,a,n),this.nodes[t].moveParent(e,a,n),this.redraw()}connectNodes(e,t,n){if(!this.verifyBoth(e,t))return;const a=this.nodes[e].children,i=this.nodes[t].parents;n in a||(a[n]=[]),n in i||(i[n]=[]),a[n].push(t),i[n].push(e),console.debug("Connected",e,t)}disconnectNodes(e,t,a){const i=this.nodes[e].children,o=this.nodes[t].parents;n(i[a],t),n(o[a],e),console.debug("Disconnected",e,t)}moveNode(e,t,n){if(this.verify(e)){const a=this.nodes[e],i=t-a.x,o=n-a.y;a.x=t,a.y=n,a.isGroup()&&a.group.collapsed&&this.eachChild(a,((e,t)=>{e.x+=i,e.y+=o}),a.group.ends),this.redraw(),console.debug("Moved node to",t,n)}}getHeads(){return Object.values(this.nodes).filter((e=>e.isHead()))}eachChild(e,t,n=[]){this.eachConnection(e.children,t,n)}eachParent(e,t,n=[]){this.eachConnection(e.parents,t,n)}eachConnection(e,t,n=[]){if(e)for(const[a,i]of Object.entries(e))for(const e of i)e in n||t(this.nodes[e],a)}getDirectNodes(e){const t={};for(const[n,a]of Object.entries(e)){n in t||(t[n]=[]);for(const e of a)t[n].push(e.id)}return t}createGroupMap(e,t=null,n=0,a=0){if(t||(t=e.group.ends),e.id in t)return null;const i={};for(const[n,a]of Object.entries(e.children)){n in i||(i[n]=[]);for(const o of a){const a=this.nodes[o],s=this.createGroupMap(a,t,e.x,e.y);i[n].push(s)}}return{id:e.id,moduleId:e.data.name,offsetX:e.x-n,offsetY:e.y-a,parents:t?e.parents:null,children:i||null}}createFromMap(e,t,n,a=null,i=(()=>null),o=null,s={},r=null){let l=a??s[e.id]??i(e,t,n);if(!(e.id in s)){s[e.id]=l;for(const[t,n]of Object.entries(e.children))for(const e of n)this.createFromMap(e,l.x,l.y,null,i,null,s,{type:t,parentId:l.id})}const u=JSON.stringify;return r&&(this.connectNodes(r.parentId,l.id,r.type),l.conn.push(u(r))),l.id}load(e){for(const t of e)this.nodes[t.id]=o.fromJSON(t);this.redraw()}},Listener:class{constructor(e,t){this.render=e,this.manager=t}on(e,t,n=!1){n?(this.render.addConnectionBinding(e,((e,n)=>{const a=n.map((e=>this.manager.nodes[e]));t(new s(s.TYPES.Connection,e,a))})),this.manager.redraw()):document.getElementById("nodel").addEventListener(e,(e=>{const n=e.target?.id;let a=null;n&&"nodel"!==n&&this.manager.verify(n,!0)&&(a=this.manager.nodes[n]),t(new s(s.TYPES.Node,e,a))}))}}};var l=t.Z;export{l as default};